<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„ä¸ªæ€§åŒ–å¯¼èˆªç«™</title>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <style>
        /* --- å…¨å±€ä¸é‡ç½® --- */
        :root {
            --primary-color: #007bff; --bg-color: #f4f6f9; --card-bg-color: #ffffff;
            --text-color: #333; --text-secondary-color: #6c757d; --border-color: #e9ecef;
            --shadow-color: rgba(0, 0, 0, 0.05); --danger-color: #dc3545; --success-color: #28a745;
        }
        body[data-theme='dark'] {
            --primary-color: #4dabf7; --bg-color: #121212; --card-bg-color: #1e1e1e;
            --text-color: #e0e0e0; --text-secondary-color: #a0a0a0; --border-color: #333;
            --shadow-color: rgba(0, 0, 0, 0.2); --danger-color: #f06565; --success-color: #48cfae;
        }
        body[data-theme='retro'] {
            --primary-color: #c08d5d; --bg-color: #fdf6e3; --card-bg-color: #fbf1c7;
            --text-color: #654321; --text-secondary-color: #928374; --border-color: #d5c4a1;
            --shadow-color: rgba(146, 131, 116, 0.1); --danger-color: #c0392b; --success-color: #27ae60;
        }
        body[data-theme='hacker'] {
            --primary-color: #00ff00; --bg-color: #000; --card-bg-color: #0d0d0d;
            --text-color: #00ff00; --text-secondary-color: #00cc00; --border-color: #003300;
            --shadow-color: rgba(0, 255, 0, 0.1); --danger-color: #ff0000; --success-color: #00ff00;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background-color: var(--bg-color); color: var(--text-color); line-height: 1.6; transition: background-color 0.3s, color 0.3s; }
        a { text-decoration: none; color: var(--primary-color); transition: color 0.2s ease; }
        a:hover { color: color-mix(in srgb, var(--primary-color) 80%, black); }
        button { cursor: pointer; border: none; background: none; font-family: inherit; }
        
        /* --- å¸ƒå±€ --- */
        .container { display: flex; max-width: 1600px; margin: 0 auto; }
        .sidebar { width: 220px; height: 100vh; position: sticky; top: 0; background-color: var(--card-bg-color); border-right: 1px solid var(--border-color); padding: 20px 0; overflow-y: auto; flex-shrink: 0; display: flex; flex-direction: column; transition: background-color 0.3s; }
        .sidebar-title { display: flex; justify-content: space-between; align-items: center; font-size: 1.5em; font-weight: 600; padding: 0 20px 10px; border-bottom: 1px solid var(--border-color); margin-bottom: 10px; }
        .sidebar-title .title-content { flex-grow: 1; } .sidebar-title .title-content img { max-height: 28px; vertical-align: middle; }
        .sidebar nav { flex-grow: 1; } .sidebar nav ul { list-style: none; }
        .sidebar nav a { display: block; padding: 10px 20px; color: var(--text-secondary-color); font-weight: 500; border-left: 3px solid transparent; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .sidebar nav a:hover { color: var(--primary-color); background-color: var(--bg-color); }
        .sidebar-actions { padding: 10px 20px; border-top: 1px solid var(--border-color); }
        .sidebar-btn { display: flex; align-items: center; gap: 8px; width: 100%; padding: 10px; font-size: 1em; color: var(--text-secondary-color); border-radius: 6px; transition: all 0.2s; margin-top: 5px; }
        .sidebar-btn:hover { background-color: var(--bg-color); color: var(--primary-color); }
        .sidebar-btn svg { width: 18px; height: 18px; flex-shrink: 0; }
        
        /* --- ä¸»å†…å®¹åŒº --- */
        .main-content { position: relative; flex-grow: 1; padding: 30px; }
        .content-section { margin-bottom: 50px; background: var(--card-bg-color); padding: 20px; border-radius: 8px; border: 1px solid transparent; transition: background-color 0.3s; }
        .section-header { display: flex; align-items: center; gap: 10px; margin-bottom: 25px; padding-bottom: 10px; border-bottom: 2px solid var(--border-color); }
        .section-header h2 { font-size: 2em; color: var(--text-color); flex-grow: 1; }
        .card-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 25px; }
        
        /* --- å¡ç‰‡æ ·å¼ --- */
        .card { background-color: var(--card-bg-color); border-radius: 8px; border: 1px solid var(--border-color); padding: 20px; box-shadow: 0 2px 8px var(--shadow-color); display: flex; flex-direction: column; }
        .card-header { display: flex; align-items: center; gap: 10px; margin-bottom: 15px; }
        .card-header h3 { font-size: 1.25em; color: var(--text-color); flex-grow: 1; }
        .card ul { list-style: none; } .link-list-default { display: flex; flex-wrap: wrap; gap: 10px; }
        .link-list-columns { column-count: 2; column-gap: 20px; }
        .card li { break-inside: avoid-column; page-break-inside: avoid; position: relative; margin-bottom: 10px; }
        .card li a { display: block; background-color: var(--bg-color); padding: 6px 12px; border-radius: 15px; font-size: 0.9em; color: var(--text-secondary-color); transition: all 0.2s; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .card li a:hover { background-color: var(--primary-color); color: #fff; }

        /* --- ç¼–è¾‘æ§ä»¶é»˜è®¤éšè— --- */
        .controls, .drag-handle, .add-item-btn, #add-category-btn-container, .custom-link-actions { display: none; }
        body.edit-mode .controls, body.edit-mode .drag-handle, body.edit-mode .add-item-btn, body.edit-mode #add-category-btn-container { display: block; }
        body.edit-mode .drag-handle { cursor: move; color: var(--text-secondary-color); font-size: 20px; }
        body.edit-mode .card li:hover .custom-link-actions { display: flex; }
        body.edit-mode .content-section { border: 2px dashed var(--primary-color); }
        .sortable-ghost { opacity: 0.4; background: #c8ebfb; }
        #edit-mode-btn.active { background-color: var(--primary-color); color: white; }
        .controls { align-items: center; gap: 8px; flex-shrink: 0;}
        .control-btn { font-size: 16px; color: var(--text-secondary-color); transition: color 0.2s; line-height: 1; padding: 4px; border-radius: 4px; }
        .control-btn:hover { background-color: var(--bg-color); }
        .custom-link-actions { position: absolute; top: 50%; right: 5px; transform: translateY(-50%); gap: 4px; background: rgba(255,255,255,0.8); padding: 2px 5px; border-radius: 10px;}
        .link-action-btn { width: 20px; height: 20px; border-radius: 50%; background-color: rgba(0,0,0,0.6); color: white; font-size: 12px; display: flex; align-items: center; justify-content: center; line-height: 1; border: 1px solid white; }
        .add-item-btn button { width: 100%; padding: 8px; border: 1px dashed var(--border-color); border-radius: 6px; color: var(--text-secondary-color); transition: all 0.2s; }
        .add-item-btn button:hover { border-color: var(--primary-color); background-color: var(--bg-color); color: var(--primary-color); }
        
        /* --- å³ä¸Šè§’æ§åˆ¶æ  --- */
        .top-right-controls { position: fixed; top: 30px; right: 30px; display: flex; gap: 10px; align-items: center; background: var(--card-bg-color); padding: 5px 10px; border-radius: 20px; box-shadow: 0 2px 10px var(--shadow-color); z-index: 10; }
        .top-right-controls button { font-size: 16px; padding: 5px; color: var(--text-secondary-color); }

        /* --- è®¾ç½®å¼¹çª— --- */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); z-index: 1000; display: none; align-items: center; justify-content: center; }
        .modal-content { background: var(--card-bg-color); padding: 25px; border-radius: 8px; width: 90%; max-width: 480px; max-height: 90vh; overflow-y: auto; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .modal-header h3 { font-size: 1.5em; } .close-btn { font-size: 1.8em; line-height: 1; color: var(--text-secondary-color); }
        .setting-section { margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid var(--border-color);}
        .setting-section:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0;}
        .setting-section h4 { margin-bottom: 12px; font-size: 1.1em; }
        .setting-field { display: flex; align-items: center; gap: 10px; }
        .modal-input { flex-grow: 1; padding: 8px; border: 1px solid var(--border-color); border-radius: 5px; font-size: 1em; background-color: var(--bg-color); color: var(--text-color); }
        .modal-btn { flex-grow: 1; text-align: center; display: inline-block; padding: 8px 15px; border-radius: 5px; cursor: pointer; transition: background-color 0.2s; color: white; }
        #save-title-btn { flex-grow: 0; }
        #export-btn { background-color: var(--success-color); } #reset-btn { background-color: var(--danger-color); }
        #import-config-label, #import-bookmarks-label { background-color: var(--primary-color); }
        #import-config-input, #import-bookmarks-input { display: none; }
        .setting-note { font-size: 0.85em; color: var(--text-secondary-color); margin-bottom: 12px; }
        .theme-selector { display: flex; gap: 15px; } .theme-option { cursor: pointer; }
        .theme-swatch { width: 30px; height: 30px; border-radius: 50%; border: 2px solid var(--border-color); }
        .theme-option input { display: none; }
        .theme-option input:checked + .theme-swatch { border-color: var(--primary-color); transform: scale(1.1); box-shadow: 0 0 10px var(--primary-color); }
        #swatch-default { background: #f4f6f9; } #swatch-dark { background: #1e1e1e; }
        #swatch-retro { background: #fbf1c7; } #swatch-hacker { background: #0d0d0d; }
        .button-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        #wechat-pay-btn { background-color: #28a745; }
        #donation-link { background-color: #ff813f; }
        
        #qr-modal-overlay { display: none; z-index: 1001; }
        #qr-modal-image { max-width: 90vw; max-height: 80vh; border-radius: 10px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        #qr-modal-overlay .close-btn { position: absolute; top: 20px; right: 30px; color: white; font-size: 3em; }
        
        @media (max-width: 992px) {
            .container { flex-direction: column; }
            .sidebar { width: 100%; height: auto; position: sticky; top: 0; z-index: 100; flex-direction: row; align-items: center; padding: 0; }
            .sidebar-title { padding-left: 15px; padding-right: 15px; }
            .sidebar nav { flex-grow: 1; display: flex; overflow-x: auto; } .sidebar nav ul { display: flex; }
            .sidebar nav a { padding: 15px; border-left: none; border-bottom: 3px solid transparent; }
            .sidebar-actions { padding: 0 5px; border-top: none; border-left: 1px solid var(--border-color); display:flex; }
            .sidebar-btn { padding: 15px 10px; margin-top: 0; }
            .main-content { padding: 20px; padding-top: 70px; }
            .top-right-controls { top: 10px; right: 15px; }
            .card-grid { grid-template-columns: 1fr; }
            .link-list-columns { column-count: 1; }
        }
    </style>
</head>
<body>

    <div class="container">
        <aside class="sidebar">
            <div class="sidebar-title" id="sidebar-title-container"></div>
            <nav id="sidebar-nav"></nav>
            <div class="sidebar-actions">
                <button id="edit-mode-btn" class="sidebar-btn" title="é¡µé¢ç¼–è¾‘"><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512" fill="currentColor"><path d="M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 252.7l22.6-22.6zM120 352.9l-33.9 9.9 9.9-33.9 194.3-194.3 24 24-194.3 194.3zM352 152.9l24 24 24-24-24-24-24 24z"/></svg></button>
                <button id="settings-btn" class="sidebar-btn" title="è®¾ç½®"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="currentColor"><path d="M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9.9 15.9-19.4 15.9H181.8c-9.5 0-17.4-6.8-19.4-15.9l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L49.8 409.4c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C50.6 273.1 50 264.6 50 256s.6-17.1 1.7-25.4L7.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9.9-15.9 19.4-15.9h148.4c9.5 0 17.4 6.8 19.4 15.9l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"/></svg></button>
            </div>
        </aside>

        <main class="main-content"></main>
    </div>

    <div id="settings-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header"><h3>å¯¼èˆªè®¾ç½®</h3><button class="close-btn" id="close-modal-btn">Ã—</button></div>
            <div id="modal-body">
                <div class="setting-section"><h4>å¤–è§‚è®¾ç½®</h4><div class="theme-selector" id="theme-selector"><label class="theme-option"><input type="radio" name="theme" value="default"><div class="theme-swatch" id="swatch-default"></div></label><label class="theme-option"><input type="radio" name="theme" value="dark"><div class="theme-swatch" id="swatch-dark"></div></label><label class="theme-option"><input type="radio" name="theme" value="retro"><div class="theme-swatch" id="swatch-retro"></div></label><label class="theme-option"><input type="radio" name="theme" value="hacker"><div class="theme-swatch" id="swatch-hacker"></div></label></div><p class="setting-note" style="margin-top: 15px;">è®¾ç½®æ˜¾ç¤ºåœ¨æµè§ˆå™¨æ ‡ç­¾é¡µä¸Šçš„ç½‘ç«™æ ‡é¢˜ã€‚</p><div class="setting-field"><input type="text" id="site-title-input" class="modal-input"><button id="save-title-btn" class="modal-btn">ä¿å­˜</button></div></div>
                <div class="setting-section"><h4>æ•°æ®ä¸å·¥å…·</h4><p class="setting-note">ç®¡ç†æ‚¨çš„å¯¼èˆªç«™æ•°æ®æˆ–ä»æµè§ˆå™¨å¯¼å…¥ä¹¦ç­¾ã€‚</p><div class="button-grid"><button id="export-btn" class="modal-btn">å¯¼å‡ºé…ç½®</button><label for="import-config-input" id="import-config-label" class="modal-btn">å¯¼å…¥é…ç½®...</label><button id="reset-btn" class="modal-btn">æ¢å¤é»˜è®¤</button><label for="import-bookmarks-input" id="import-bookmarks-label" class="modal-btn">å¯¼å…¥HTMLä¹¦ç­¾...</label></div><input type="file" id="import-config-input" accept=".json"><input type="file" id="import-bookmarks-input" accept=".html,.htm"></div>
                <div class="setting-section">
                    <h4>æ”¯æŒé¡¹ç›®</h4><p class="setting-note">å¦‚æœæ‚¨è§‰å¾—è¿™ä¸ªå¯¼èˆªç«™å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œå¯ä»¥è¯·æˆ‘å–æ¯å’–å•¡ï¼</p>
                    <div class="donation-area">
                        <button id="wechat-pay-btn" class="modal-btn" onclick="showQrCodeModal('https://imgtu.com/uploads/k2awv98r/r-junshidashaui.webp')">å¾®ä¿¡æ”¯ä»˜</button>
                        <a href="[è¿™é‡Œæ›¿æ¢æˆä½ çš„å¤‡ç”¨æ”¶æ¬¾é“¾æ¥]" target="_blank" id="donation-link" class="modal-btn">â˜•ï¸ å¤‡ç”¨é“¾æ¥</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="qr-modal-overlay" class="modal-overlay">
        <span id="qr-modal-close" class="close-btn">Ã—</span>
        <img id="qr-modal-image" src="" alt="æ”¶æ¬¾ç ">
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const defaultData = { settings: { lang: "zh", theme: "default", isDark: false }, siteTitle: { zh: "æˆ‘çš„ä¸ªæ€§åŒ–å¯¼èˆªç«™", en: "My Personalized Startpage" }, sidebarTitle: { zh: "å¯¼èˆªç«™", en: "Navigator" }, categories: [ { id: 'general-news', title: { zh: 'ç»¼åˆèµ„è®¯', en: 'General News' }, cards: [ { id: 'gn-1', title: { zh: 'ä¸»æµçƒ­ç‚¹', en: 'Trending' }, links: [ { name: { zh: 'å¾®åš-çƒ­æœ', en: 'Weibo Hot' }, url: 'https://s.weibo.com/top/summary' }, { name: { zh: 'ç™¾åº¦-çƒ­æœ', en: 'Baidu Hot' }, url: 'https://top.baidu.com/board?tab=realtime' }, { name: { zh: 'ä»Šæ—¥å¤´æ¡-çƒ­æ¦œ', en: 'Toutiao' }, url: 'https://www.toutiao.com/trending/' }, { name: { zh: 'æŠ–éŸ³-çƒ­ç‚¹æ¦œ', en: 'Douyin Hot' }, url: 'https://www.douyin.com/hot' }, { name: { zh: 'å¿«æ‰‹-çƒ­æ¦œ', en: 'Kuaishou' }, url: 'https://www.kuaishou.com/brilliant' }, ]}, { id: 'gn-2', title: { zh: 'æ·±åº¦é˜…è¯»', en: 'In-Depth' }, links: [ { name: { zh: 'çŸ¥ä¹-çƒ­æ¦œ', en: 'Zhihu Hot' }, url: 'https://www.zhihu.com/hot' }, { name: { zh: 'å¾®ä¿¡-çƒ­é—¨', en: 'WeChat' }, url: 'https://weixin.sogou.com/' }, { name: { zh: 'æ¾æ¹ƒæ–°é—»-çƒ­æ¦œ', en: 'The Paper' }, url: 'https://www.thepaper.cn/hot-news' }, { name: { zh: '36æ°ª-çƒ­æ¦œ', en: '36Kr' }, url: 'https://36kr.com/hot-list/zonghe' }, { name: { zh: 'å°‘æ•°æ´¾-çƒ­æ¦œ', en: 'SSPAI' }, url: 'https://sspai.com/hot' }, { name: { zh: 'Readhub', en: 'Readhub' }, url: 'https://readhub.cn/' }, ]}, { id: 'gn-3', title: { zh: 'ç™¾ç§‘çŸ¥è¯†', en: 'Wiki & Knowledge' }, links: [ { name: { zh: 'å†å²ä¸Šçš„ä»Šå¤©', en: 'On This Day' }, url: 'https://www.todayonhistory.com/' }, { name: { zh: 'ç™¾åº¦-ç™¾ç§‘', en: 'Baidu Baike' }, url: 'https://baike.baidu.com/' }, { name: { zh: 'ç»´åŸºç™¾ç§‘-ä¸­æ–‡', en: 'Wikipedia (ZH)' }, url: 'https://zh.wikipedia.org/' }, { name: { zh: 'çŸ¥ä¹æ—¥æŠ¥', en: 'Zhihu Daily' }, url: 'https://daily.zhihu.com/' }, ]} ] }, { id: 'ai-era', title: { zh: 'AI çºªå…ƒ', en: 'AI Era' }, cards: [ { id: 'ai-1', title: { zh: 'AI å¿«è®¯', en: 'AI News' }, links: [ { name: { zh: 'é‡å­ä½-é¦–é¡µ', en: 'QbitAI' }, url: 'https://www.qbitai.com/' }, { name: { zh: 'æœºå™¨ä¹‹å¿ƒ-çƒ­æ¦œ', en: 'JiQZhiXin' }, url: 'https://www.jiqizhixin.com/hot-list' }, { name: { zh: 'APlay-AIæ—¥æŠ¥', en: 'APlay Daily' }, url: 'https://www.aplay.ai/' }, { name: { zh: 'Hugging Face-è¶‹åŠ¿', en: 'HF Trending' }, url: 'https://huggingface.co/trending' }, ]}, { id: 'ai-2', title: { zh: 'AI äº§å“ä¸åº”ç”¨', en: 'AI Products' }, links: [ { name: { zh: 'Product Hunt - AI', en: 'Product Hunt AI' }, url: 'https://www.producthunt.com/categories/artificial-intelligence' }, { name: { zh: 'There\'s An AI For That', en: 'TAAFT' }, url: 'https://theresanaiforthat.com/' }, { name: { zh: 'æœªæ¥ç™¾ç§‘', en: 'Futurepedia' }, url: 'https://www.futurepedia.io/' }, { name: { zh: 'Replicate - Explore', en: 'Replicate' }, url: 'https://replicate.com/explore' }, ]}, { id: 'ai-3', title: { zh: 'å‰æ²¿è®ºæ–‡', en: 'Papers' }, links: [ { name: { zh: 'arXiv - äººå·¥æ™ºèƒ½', en: 'arXiv - AI' }, url: 'https://arxiv.org/list/cs.AI/new' }, { name: { zh: 'Papers with Code', en: 'Papers with Code' }, url: 'https://paperswithcode.com/trending' }, ]} ] }, { id: 'tech-frontier', title: { zh: 'ç§‘æŠ€å‰æ²¿', en: 'Tech Frontier' }, cards: [ { id: 'tf-1', title: { zh: 'ç§‘æŠ€é—¨æˆ·', en: 'Tech Portals' }, links: [ { name: { zh: 'è™å—…ç½‘-çƒ­æ¦œ', en: 'Huxiu' }, url: 'https://www.huxiu.com/hot.html' }, { name: { zh: 'ITä¹‹å®¶-çƒ­æ¦œ', en: 'ITHOME' }, url: 'https://www.ithome.com/rank' }, { name: { zh: 'cnBeta-çƒ­é—¨', en: 'cnBeta' }, url: 'https://hot.cnbeta.com/' }, { name: { zh: 'InfoQ-çƒ­ç‚¹', en: 'InfoQ' }, url: 'https://www.infoq.cn/hot' }, { name: { zh: 'å¼€å‘è€…å¤´æ¡', en: 'Toutiao.io' }, url: 'https://toutiao.io/' }, ]}, { id: 'tf-2', title: { zh: 'å¼€å‘è€…ç¤¾åŒº', en: 'Dev Community' }, links: [ { name: { zh: 'GitHub-è¶‹åŠ¿', en: 'GitHub Trending' }, url: 'https://github.com/trending' }, { name: { zh: 'V2EX-æœ€çƒ­', en: 'V2EX Hot' }, url: 'https://www.v2ex.com/?tab=hot' }, { name: { zh: 'ç¨€åœŸæ˜é‡‘-çƒ­æ¦œ', en: 'Juejin Hot' }, url: 'https://juejin.cn/hot/articles' }, { name: { zh: 'CSDN-çƒ­æ¦œ', en: 'CSDN Hot' }, url: 'https://blog.csdn.net/hot-articles' }, { name: { zh: 'StackOverflow-çƒ­é—¨', en: 'StackOverflow' }, url: 'https://stackoverflow.com/questions' }, { name: { zh: 'HelloGitHub', en: 'HelloGitHub' }, url: 'https://hellogithub.com/' }, ]}, { id: 'tf-3', title: { zh: 'ç¡¬æ ¸æå®¢', en: 'Geeks' }, links: [ { name: { zh: 'å¾çˆ±ç ´è§£-çƒ­å¸–', en: '52Pojie' }, url: 'https://www.52pojie.cn/forum.php?mod=guide&view=hot' }, { name: { zh: 'Chiphell-çƒ­å¸–', en: 'Chiphell' }, url: 'https://www.chiphell.com/forum.php?mod=guide&view=hot' }, { name: { zh: 'FreeCodeCamp', en: 'FreeCodeCamp' }, url: 'https://www.freecodecamp.org/news/' }, ]} ] }, { id: 'career-growth', title: { zh: 'èŒåœºæˆé•¿', en: 'Career Growth' }, cards: [ { id: 'cg-1', title: { zh: 'è¡Œä¸šæ´å¯Ÿ', en: 'Insights' }, links: [ { name: { zh: 'è„‰è„‰-çƒ­æ¦œ', en: 'Maimai' }, url: 'https://maimai.cn/web/gossip/' }, { name: { zh: 'é¢†è‹±-æ¯æ—¥å¿…è¯»', en: 'LinkedIn News' }, url: 'https://www.linkedin.com/news/' }, { name: { zh: 'ç¬¬ä¸€è´¢ç»', en: 'Yicai' }, url: 'https://www.yicai.com/' }, { name: { zh: 'åå°”è¡—è§é—»', en: 'Wallstreetcn' }, url: 'https://wallstreetcn.com/' }, ]}, { id: 'cg-2', title: { zh: 'æ±‚èŒæ‹›è˜', en: 'Jobs' }, links: [ { name: { zh: 'ç‰›å®¢ç½‘-è®¨è®ºåŒº', en: 'Nowcoder' }, url: 'https://www.nowcoder.com/discuss' }, { name: { zh: 'Bossç›´è˜-èµ„è®¯', en: 'Zhipin' }, url: 'https://www.zhipin.com/media/news/' }, { name: { zh: 'æ‹‰å‹¾-è¨€èŒ', en: 'Lagou' }, url: 'https://www.lagou.com/active' }, ]}, { id: 'cg-3', title: { zh: 'åˆ›ä¸šä¸å‰¯ä¸š', en: 'Startups' }, links: [ { name: { zh: 'Indie Hackers', en: 'Indie Hackers' }, url: 'https://www.indiehackers.com/' }, { name: { zh: 'å°æŠ¥ç«¥-çƒ­é—¨', en: 'Xiaobot' }, url: 'https://xiaobot.net/hot_products' }, { name: { zh: 'å³åˆ»-åˆ›ä¸šåœˆ', en: 'Jike' }, url: 'https://web.okjike.com/discover' }, ]} ] }, { id: 'community-buzz', title: { zh: 'ç¤¾åŒºçƒ­è®®', en: 'Community Buzz' }, cards: [ { id: 'cb-1', title: { zh: 'ç»¼åˆè®¨è®º', en: 'General' }, links: [ { name: { zh: 'è™æ‰‘-æ­¥è¡Œè¡—', en: 'Hupu' }, url: 'https://bbs.hupu.com/all-gambia' }, { name: { zh: 'è´´å§-çƒ­è®®æ¦œ', en: 'Tieba' }, url: 'https://tieba.baidu.com/hottopic/browse/topicList' }, { name: { zh: 'NGA-çƒ­å¸–', en: 'NGA' }, url: 'https://bbs.nga.cn/thread.php?fid=-7' }, { name: { zh: 'Reddit-çƒ­é—¨', en: 'Reddit' }, url: 'https://www.reddit.com/hot/' }, ]}, { id: 'cb-2', title: { zh: 'å…´è¶£å°ç»„', en: 'Groups' }, links: [ { name: { zh: 'è±†ç“£-å°ç»„', en: 'Douban' }, url: 'https://www.douban.com/group/explore' }, { name: { zh: 'å°çº¢ä¹¦-çƒ­é—¨', en: 'Xiaohongshu' }, url: 'https://www.xiaohongshu.com/explore' }, { name: { zh: 'å³åˆ»-åœˆå­', en: 'Jike' }, url: 'https://web.okjike.com/discover' }, ]}, { id: 'cb-3', title: { zh: 'æ€€æ—§ç¤¾åŒº', en: 'Vintage' }, links: [ { name: { zh: 'æ°´æœ¨ç¤¾åŒº-çƒ­ç‚¹', en: 'NewSMTH' }, url: 'https://www.newsmth.net/nForum/#!hot' }, { name: { zh: 'æœå£³çƒ­ç‚¹', en: 'Guokr' }, url: 'https://www.guokr.com/hot/' }, ]} ] }, { id: 'entertainment-lifestyle', title: { zh: 'å¨±ä¹ç”Ÿæ´»', en: 'Entertainment' }, cards: [ { id: 'el-1', title: { zh: 'å½±éŸ³çƒ­æ¦œ', en: 'Video/TV' }, links: [ { name: { zh: 'å“”å“©å“”å“©-çƒ­é—¨', en: 'Bilibili' }, url: 'https://www.bilibili.com/v/popular/all' }, { name: { zh: 'è±†ç“£-æ–°ç‰‡æ¦œ', en: 'Douban Movie' }, url: 'https://movie.douban.com/chart' }, { name: { zh: 'å¾®åš-è¶…è¯', en: 'Weibo Topic' }, url: 'https://weibo.com/p/100808_-_chaohua' }, { name: { zh: 'çŒ«çœ¼-ç”µå½±æ¦œ', en: 'Maoyan' }, url: 'https://www.maoyan.com/board' }, { name: { zh: 'è…¾è®¯è§†é¢‘-çƒ­æœ', en: 'Tencent Video' }, url: 'https://v.qq.com/x/hotlist/' }, { name: { zh: 'çˆ±å¥‡è‰º-çƒ­æ’­', en: 'iQIYI' }, url: 'https://www.iqiyi.com/rank/' }, ]}, { id: 'el-2', title: { zh: 'æ¸¸æˆä¸–ç•Œ', en: 'Gaming' }, links: [ { name: { zh: 'Steam-çƒ­é”€æ¦œ', en: 'Steam' }, url: 'https://store.steampowered.com/search/?filter=topsellers' }, { name: { zh: 'TapTap-çƒ­é—¨æ¦œ', en: 'TapTap' }, url: 'https://www.taptap.cn/top/played' }, { name: { zh: 'æ¸¸æ°‘æ˜Ÿç©º-çƒ­ç‚¹', en: 'Gamersky' }, url: 'https://www.gamersky.com/news/' }, { name: { zh: 'æœºæ ¸-èµ„è®¯', en: 'Gcores' }, url: 'https://www.gcores.com/news' }, { name: { zh: 'IGN-çƒ­é—¨', en: 'IGN' }, url: 'https://www.ign.com/' }, ]}, { id: 'el-3', title: { zh: 'ç”Ÿæ´»è¶£å‘³', en: 'Lifestyle' }, links: [ { name: { zh: 'ä¸‹å¨æˆ¿-èœè°±', en: 'Xiachufang' }, url: 'https://www.xiachufang.com/explore/' }, { name: { zh: 'é©¬èœ‚çª-æ¸¸è®°', en: 'Mafengwo' }, url: 'http://www.mafengwo.cn/travel-scenic-spot/mafengwo/10186.html' }, { name: { zh: 'ç…è›‹-æ— èŠå›¾', en: 'Jandan' }, url: 'https://jandan.net/pic' }, { name: { zh: 'ç³—äº‹ç™¾ç§‘', en: 'Qiushibaike' }, url: 'https://www.qiushibaike.com/hot/' }, ]} ] }, { id: 'design-creativity', title: { zh: 'çµæ„Ÿåˆ›æ„', en: 'Creativity' }, cards: [ { id: 'dc-1', title: { zh: 'è®¾è®¡çµæ„Ÿ', en: 'Design' }, links: [ { name: { zh: 'ç«™é…·-äººæ°”æ¦œ', en: 'ZCOOL' }, url: 'https://www.zcool.com.cn/discover/0!0!0!0!0!!!!-1!1' }, { name: { zh: 'Behance-ç²¾é€‰', en: 'Behance' }, url: 'https://www.behance.net/galleries' }, { name: { zh: 'Dribbble-æµè¡Œ', en: 'Dribbble' }, url: 'https://dribbble.com/shots' }, { name: { zh: 'UIä¸­å›½-æ¨è', en: 'UI.cn' }, url: 'https://www.ui.cn/' }, ]}, { id: 'dc-2', title: { zh: 'åˆ›æ„å‘ç°', en: 'Discovery' }, links: [ { name: { zh: 'èŠ±ç“£-çƒ­é—¨', en: 'Huaban' }, url: 'https://huaban.com/discovery/' }, { name: { zh: 'LOFTER-æ’ç”»æ¦œ', en: 'LOFTER' }, url: 'https://www.lofter.com/tag/æ’ç”»' }, { name: { zh: 'Unsplash-çƒ­é—¨', en: 'Unsplash' }, url: 'https://unsplash.com/' }, { name: { zh: 'Pixiv-æ—¥æ¦œ', en: 'Pixiv' }, url: 'https://www.pixiv.net/ranking.php' }, { name: { zh: '500px-æµè¡Œ', en: '500px' }, url: 'https://500px.com/popular' }, ]} ] }, { id: 'shopping-deals', title: { zh: 'æ¶ˆè´¹æŒ‡å—', en: 'Shopping' }, cards: [ { id: 'sd-1', title: { zh: 'å¥½ä»·æ¨è', en: 'Deals' }, links: [ { name: { zh: 'ä»€ä¹ˆå€¼å¾—ä¹°', en: 'SMZDM' }, url: 'https://www.smzdm.com/haojia/' }, { name: { zh: 'åŒ—ç¾çœé’±å¿«æŠ¥', en: 'Dealmoon' }, url: 'https://www.dealmoon.com/' }, { name: { zh: 'é›ªçƒ-çƒ­é—¨', en: 'Xueqiu' }, url: 'https://xueqiu.com/' }, ]}, { id: 'sd-2', title: { zh: 'ç”µå•†çƒ­å–', en: 'E-commerce' }, links: [ { name: { zh: 'æ·˜å®-çƒ­é”€', en: 'Taobao' }, url: 'https://remai.taobao.com/' }, { name: { zh: 'äº¬ä¸œ-çƒ­å–', en: 'JD' }, url: 'https://www.jd.com/phb.html' }, { name: { zh: 'æ‹¼å¤šå¤š-çƒ­æ¦œ', en: 'Pinduoduo' }, url: 'https://mobile.pinduoduo.com/ranking.html' }, { name: { zh: 'äºšé©¬é€Š-å›¾ä¹¦', en: 'Amazon Books' }, url: 'https://www.amazon.cn/gp/bestsellers/books' }, ]}, { id: 'sd-3', title: { zh: 'å“è´¨ç”Ÿæ´»', en: 'Quality Life' }, links: [ { name: { zh: 'å°ç±³æœ‰å“-çƒ­é”€', en: 'Xiaomi Youpin' }, url: 'https://www.xiaomiyoupin.com/hot' }, { name: { zh: 'ç½‘æ˜“ä¸¥é€‰-çƒ­é”€', en: 'Yanxuan' }, url: 'https://you.163.com/' }, { name: { zh: 'é—²é±¼-çƒ­é—¨', en: 'Xianyu' }, url: 'https://g.alicdn.com/idle-fish-web/homepage/' }, ]} ] }, { id: 'global-view', title: { zh: 'å…¨çƒè§†é‡', en: 'Global View' }, cards: [ { id: 'gv-1', title: { zh: 'å›½é™…é€šè®¯ç¤¾', en: 'News Agencies' }, links: [ { name: { zh: 'è·¯é€ç¤¾ (Reuters)', en: 'Reuters' }, url: 'https://www.reuters.com/' }, { name: { zh: 'ç¾è”ç¤¾ (AP)', en: 'Associated Press' }, url: 'https://apnews.com/' }, { name: { zh: 'BBC News', en: 'BBC News' }, url: 'https://www.bbc.com/news' }, { name: { zh: 'çº½çº¦æ—¶æŠ¥ (NYT)', en: 'The New York Times' }, url: 'https://www.nytimes.com/' }, ]}, { id: 'gv-2', title: { zh: 'ç§‘æŠ€ä¸å•†ä¸š', en: 'Tech & Biz' }, links: [ { name: { zh: 'Hacker News', en: 'Hacker News' }, url: 'https://news.ycombinator.com/' }, { name: { zh: 'TechCrunch', en: 'TechCrunch' }, url: 'https://techcrunch.com/' }, { name: { zh: 'The Verge', en: 'The Verge' }, url: 'https://www.theverge.com/' }, { name: { zh: 'å½­åšç¤¾ (Bloomberg)', en: 'Bloomberg' }, url: 'https://www.bloomberg.com/' }, { name: { zh: 'ç»æµå­¦äºº (Economist)', en: 'The Economist' }, url: 'https://www.economist.com/' }, ]} ] }, { id: 'academic-research', title: { zh: 'å­¦æœ¯æ¢ç´¢', en: 'Academic' }, cards: [ { id: 'ar-1', title: { zh: 'é«˜æ ¡BBS', en: 'University BBS' }, links: [ { name: { zh: 'åŒ—å¤§æœªåBBS', en: 'PKU BBS' }, url: 'https://bbs.pku.edu.cn/v2/home.php' }, { name: { zh: 'æ¸…åæ°´æœ¨ç¤¾åŒº', en: 'Tsinghua BBS' }, url: 'https://www.newsmth.net/' }, { name: { zh: 'å¤æ—¦æ—¥æœˆå…‰å', en: 'Fudan BBS' }, url: 'https://bbs.fudan.edu.cn/bbs/main' }, { name: { zh: 'ä¸Šäº¤é¥®æ°´æ€æº', en: 'SJTU BBS' }, url: 'https://bbs.sjtu.edu.cn/' }, ]}, { id: 'ar-2', title: { zh: 'å­¦æœ¯èµ„æº', en: 'Resources' }, links: [ { name: { zh: 'è°·æ­Œå­¦æœ¯', en: 'Google Scholar' }, url: 'https://scholar.google.com/' }, { name: { zh: 'çŸ¥ç½‘-çƒ­ç‚¹æ–‡çŒ®', en: 'CNKI' }, url: 'https://kns.cnki.net/kns/hotspot?type=0' }, ]} ] } ]
    };
    let appData;
    function loadData() { let data = localStorage.getItem('navData'); if (data) { appData = JSON.parse(data); if (!appData.settings || !appData.sidebarTitle) { const oldTitle = appData.siteTitle; appData = JSON.parse(JSON.stringify(defaultData)); appData.siteTitle.zh = oldTitle || defaultData.siteTitle.zh; appData.siteTitle.en = oldTitle || defaultData.siteTitle.en; } } else { appData = JSON.parse(JSON.stringify(defaultData)); } }
    function saveData() { localStorage.setItem('navData', JSON.stringify(appData)); }
    const _t = (textObj) => { if(typeof textObj !== 'object' || textObj === null) return textObj; return textObj[appData.settings.lang] || textObj.zh || textObj.en || ''; }
    function applyTheme() { document.body.dataset.theme = appData.settings.theme; }
    const mainContent = document.querySelector('.main-content');
    const sidebarNav = document.getElementById('sidebar-nav');
    const sidebarTitleContainer = document.getElementById('sidebar-title-container');
    function renderAll() { applyTheme(); document.title = _t(appData.siteTitle); sidebarTitleContainer.innerHTML = `<div class="title-content">${_t(appData.sidebarTitle)}</div><div class="controls"><button class="control-btn" onclick="editSidebarTitle()">âœï¸</button></div>`; sidebarNav.innerHTML = `<ul>${appData.categories.map(c => `<li><a href="#${c.id}">${_t(c.title)}</a></li>`).join('')}</ul>`; renderMainContent(); }
    function renderMainContent() { mainContent.querySelector('.top-right-controls')?.remove(); const contentHTML = appData.categories.map((category, catIndex) => { const cardsHTML = category.cards.map((card, cardIndex) => { const listClass = card.links.length > 8 ? 'link-list-columns' : 'link-list-default'; const linksHTML = card.links.map((link, linkIndex) => `<li><a href="${link.url}" target="_blank" title="${_t(link.name)}">${_t(link.name)}</a><div class="custom-link-actions"><button title="ç¼–è¾‘" onclick="editLink(${catIndex},${cardIndex},${linkIndex})">âœï¸</button><button title="åˆ é™¤" onclick="deleteLink(${catIndex},${cardIndex},${linkIndex})">Ã—</button></div></li>`).join(''); return `<div class="card" data-card-index="${cardIndex}"><div class="card-header"><div class="drag-handle">â ¿</div><h3>${_t(card.title)}</h3><div class="controls"><button title="ä¸Šç§»" onclick="moveCard(${catIndex},${cardIndex},-1)">ğŸ”¼</button><button title="ä¸‹ç§»" onclick="moveCard(${catIndex},${cardIndex},1)">ğŸ”½</button><button title="ç¼–è¾‘" onclick="editCardTitle(${catIndex},${cardIndex})">âœï¸</button><button title="åˆ é™¤" onclick="deleteCard(${catIndex},${cardIndex})">âŒ</button></div></div><ul class="${listClass}">${linksHTML}</ul><div class="add-item-btn"><button onclick="addLink(${catIndex},${cardIndex})">+ ${_t({zh:"æ·»åŠ é“¾æ¥", en:"Add Link"})}</button></div></div>`; }).join(''); return `<section id="${category.id}" class="content-section" data-cat-index="${catIndex}"><div class="section-header"><div class="drag-handle">â ¿</div><h2>${_t(category.title)}</h2><div class="controls"><button title="ä¸Šç§»" onclick="moveCategory(${catIndex},-1)">ğŸ”¼</button><button title="ä¸‹ç§»" onclick="moveCategory(${catIndex},1)">ğŸ”½</button><button title="ç¼–è¾‘" onclick="editCategoryTitle(${catIndex})">âœï¸</button><button title="åˆ é™¤" onclick="deleteCategory(${catIndex})">âŒ</button></div></div><div class="card-grid">${cardsHTML}</div><div class="add-item-btn"><button onclick="addCard(${catIndex})">+ ${_t({zh:"æ·»åŠ å¡ç‰‡", en:"Add Card"})}</button></div></section>`; }).join('') + `<div id="add-category-btn-container" class="add-item-btn"><button onclick="addCategory()">+ ${_t({zh:"æ·»åŠ åˆ†ç±»", en:"Add Category"})}</button></div>`; mainContent.innerHTML = `<div class="top-right-controls"><button id="lang-switch-btn"></button><button id="theme-switch-btn"></button></div>` + contentHTML; updateTopControls(); }
    const reRender = () => { saveData(); renderAll(); };
    const moveItem = (arr, from, to) => { const item = arr.splice(from, 1)[0]; arr.splice(to, 0, item); };
    const createI18nObject = (val) => ({ zh: val, en: val });
    window.editSidebarTitle = () => { const newTitle = prompt(`${_t({zh:"è¾“å…¥ç«™ç‚¹æ ‡è¯†", en:"Enter site identity"})}:`, _t(appData.sidebarTitle)); if (newTitle !== null) { appData.sidebarTitle[appData.settings.lang] = newTitle; reRender(); }};
    window.addCategory = () => { const title = prompt(_t({zh:"æ–°åˆ†ç±»æ ‡é¢˜:", en:"New category title:"})); if(title) appData.categories.push({ id: `c_${Date.now()}`, title: createI18nObject(title), cards: [] }); reRender(); };
    window.deleteCategory = (i) => { if (confirm(`${_t({zh:"ç¡®è®¤åˆ é™¤", en:"Confirm delete"})}: "${_t(appData.categories[i].title)}"?`)) { appData.categories.splice(i, 1); reRender(); }};
    window.editCategoryTitle = (i) => { const newTitle = prompt(_t({zh:"æ–°æ ‡é¢˜:", en:"New title:"}), _t(appData.categories[i].title)); if(newTitle !== null) { appData.categories[i].title[appData.settings.lang] = newTitle; reRender(); }};
    window.moveCategory = (i, dir) => { const to = i + dir; if (to >= 0 && to < appData.categories.length) { moveItem(appData.categories, i, to); reRender(); } };
    window.addCard = (catIdx) => { const title = prompt(_t({zh:"æ–°å¡ç‰‡æ ‡é¢˜:", en:"New card title:"})); if(title) { appData.categories[catIdx].cards.push({ id: `card_${Date.now()}`, title: createI18nObject(title), links: [] }); reRender(); }};
    window.deleteCard = (catIdx, cardIdx) => { if (confirm(`${_t({zh:"ç¡®è®¤åˆ é™¤", en:"Confirm delete"})}: "${_t(appData.categories[catIdx].cards[cardIdx].title)}"?`)) { appData.categories[catIdx].cards.splice(cardIdx, 1); reRender(); }};
    window.editCardTitle = (catIdx, cardIdx) => { const newTitle = prompt(_t({zh:"æ–°æ ‡é¢˜:", en:"New title:"}), _t(appData.categories[catIdx].cards[cardIdx].title)); if(newTitle !== null) { appData.categories[catIdx].cards[cardIdx].title[appData.settings.lang] = newTitle; reRender(); }};
    window.moveCard = (catIdx, cardIdx, dir) => { const cards = appData.categories[catIdx].cards; const to = cardIdx + dir; if(to >= 0 && to < cards.length) { moveItem(cards, cardIdx, to); reRender(); } };
    window.addLink = (catIdx, cardIdx) => { const name = prompt(_t({zh:"ç½‘ç«™åç§°:", en:"Site name:"})); if(!name) return; const url = prompt(_t({zh:"ç½‘ç«™åœ°å€:", en:"Site URL:"}), "https://"); if(!url) return; appData.categories[catIdx].cards[cardIdx].links.push({ name: createI18nObject(name), url }); reRender(); };
    window.editLink = (catIdx, cardIdx, linkIdx) => { const l = appData.categories[catIdx].cards[cardIdx].links[linkIdx]; const name = prompt(_t({zh:"æ–°åç§°:", en:"New name:"}), _t(l.name)); if(name === null) return; const url = prompt(_t({zh:"æ–°åœ°å€:", en:"New URL:"}), l.url); if(url === null) return; l.name[appData.settings.lang] = name; l.url = url; reRender(); };
    window.deleteLink = (catIdx, cardIdx, linkIdx) => { if (confirm(`${_t({zh:"ç¡®è®¤åˆ é™¤", en:"Confirm delete"})}: "${_t(appData.categories[catIdx].cards[cardIdx].links[linkIdx].name)}"?`)) { appData.categories[catIdx].cards[cardIdx].links.splice(linkIdx, 1); reRender(); }};
    const modal = document.getElementById('settings-modal');
    document.getElementById('settings-btn').addEventListener('click', () => { document.getElementById('site-title-input').value = _t(appData.siteTitle); document.querySelector(`.theme-option input[value="${appData.settings.theme}"]`).checked = true; modal.style.display = 'flex'; });
    document.getElementById('close-modal-btn').addEventListener('click', () => modal.style.display = 'none');
    modal.addEventListener('click', (e) => { if (e.target.id === 'settings-modal') modal.style.display = 'none'; });
    document.getElementById('theme-selector').addEventListener('change', e => { appData.settings.theme = e.target.value; appData.settings.isDark = (e.target.value === 'dark' || e.target.value === 'hacker'); saveData(); applyTheme(); updateTopControls(); });
    document.getElementById('save-title-btn').addEventListener('click', () => { const newTitle = document.getElementById('site-title-input').value.trim(); if (newTitle) { appData.siteTitle[appData.settings.lang] = newTitle; reRender(); alert(_t({zh:'ç½‘ç«™æ ‡é¢˜å·²æ›´æ–°ï¼', en:'Site title updated!'})); } else { alert(_t({zh:'æ ‡é¢˜ä¸èƒ½ä¸ºç©ºï¼', en:'Title cannot be empty!'})); }});
    document.getElementById('reset-btn').addEventListener('click', () => { if(confirm(_t({zh:'è­¦å‘Šï¼šæ­¤æ“ä½œå°†åˆ é™¤æ‰€æœ‰è‡ªå®šä¹‰å†…å®¹ï¼Œæ¢å¤åˆ°åˆå§‹å¸ƒå±€ï¼Œç¡®å®šè¦ç»§ç»­å—ï¼Ÿ', en:'Warning: This will delete all your customizations. Are you sure?'}))) { localStorage.removeItem('navData'); loadData(); reRender(); alert(_t({zh:'å·²æ¢å¤ä¸ºé»˜è®¤å¸ƒå±€ã€‚', en:'Default layout has been restored.'})); modal.style.display = 'none'; } });
    document.getElementById('export-btn').addEventListener('click', () => { const dataStr = JSON.stringify(appData, null, 2); const blob = new Blob([dataStr], {type: 'application/json'}); const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = `nav-config-${new Date().toISOString().slice(0,10)}.json`; a.click(); URL.revokeObjectURL(a.href); });
    document.getElementById('import-config-input').addEventListener('change', (e) => { const file = e.target.files[0]; if (!file) return; const reader = new FileReader(); reader.onload = (re) => { try { const importedData = JSON.parse(re.target.result); if (importedData && Array.isArray(importedData.categories)) { if (confirm(_t({zh:'è¿™å°†è¦†ç›–æ‚¨å½“å‰çš„å…¨éƒ¨å¸ƒå±€å’Œé“¾æ¥ï¼Œç¡®å®šè¦å¯¼å…¥å—ï¼Ÿ', en:'This will overwrite your current layout. Are you sure?'}))) { appData = importedData; reRender(); alert(_t({zh:'é…ç½®å·²æˆåŠŸå¯¼å…¥ï¼', en:'Configuration imported successfully!'})); modal.style.display = 'none'; } } else { alert('æ–‡ä»¶æ ¼å¼æ— æ•ˆã€‚'); } } catch (err) { alert('è§£ææ–‡ä»¶å¤±è´¥ã€‚'); } finally { e.target.value = ''; } }; reader.readAsText(file); });
    document.getElementById('import-bookmarks-input').addEventListener('change', (e) => { const file = e.target.files[0]; if (!file) return; const reader = new FileReader(); reader.onload = (re) => { const parser = new DOMParser(); const doc = parser.parseFromString(re.target.result, "text/html"); let importedCount = 0; if (appData.categories.length === 0) appData.categories.push({ id: `c_${Date.now()}`, title: createI18nObject("å¯¼å…¥çš„ä¹¦ç­¾"), cards: [] }); const targetCategory = appData.categories[0]; const allUrlsInCategory = new Set(targetCategory.cards.flatMap(c => c.links.map(l => l.url))); const dts = doc.body.querySelectorAll('dl > dt'); let looseLinks = []; dts.forEach(dt => { const h3 = dt.querySelector('h3'); const a = dt.querySelector('a'); if (h3) { const folderName = h3.textContent.trim(); const newCard = { id: `card_${Date.now()}`, title: createI18nObject(folderName), links: [] }; const linkDl = dt.nextElementSibling; if(linkDl && linkDl.tagName === 'DL') { linkDl.querySelectorAll('a').forEach(linkNode => { const name = linkNode.textContent.trim(); const url = linkNode.href; if (name && url && !url.startsWith('javascript:') && !allUrlsInCategory.has(url)) { newCard.links.push({ name: createI18nObject(name), url }); allUrlsInCategory.add(url); importedCount++; } }); } if(newCard.links.length > 0) targetCategory.cards.push(newCard); } else if (a) { const name = a.textContent.trim(); const url = a.href; if (name && url && !url.startsWith('javascript:') && !allUrlsInCategory.has(url)) { looseLinks.push({ name: createI18nObject(name), url }); allUrlsInCategory.add(url); importedCount++; } } }); if (looseLinks.length > 0) { let uncatCard = targetCategory.cards.find(c => _t(c.title) === "æœªåˆ†ç±»ä¹¦ç­¾" || _t(c.title) === "Uncategorized"); if(!uncatCard) { uncatCard = { id: `card_uncat_${Date.now()}`, title: {zh:"æœªåˆ†ç±»ä¹¦ç­¾", en:"Uncategorized"}, links: [] }; targetCategory.cards.push(uncatCard); } uncatCard.links.push(...looseLinks); } if (importedCount > 0) { reRender(); alert(`${_t({zh:"æˆåŠŸå¯¼å…¥",en:"Imported"})} ${importedCount} ${_t({zh:"ä¸ªæ–°ä¹¦ç­¾åˆ°",en:"new bookmarks to"})} "${_t(targetCategory.title)}"!`); } else { alert(_t({zh:'æ²¡æœ‰æ‰¾åˆ°æ–°ä¹¦ç­¾æˆ–æ‰€æœ‰ä¹¦ç­¾å·²å­˜åœ¨ã€‚', en:'No new bookmarks found or they already exist.'})); } modal.style.display = 'none'; e.target.value = ''; }; reader.readAsText(file); });
    const editModeBtn = document.getElementById('edit-mode-btn');
    let sortableInstances = []; let isEditMode = false;
    editModeBtn.addEventListener('click', () => { isEditMode = !isEditMode; document.body.classList.toggle('edit-mode', isEditMode); editModeBtn.classList.toggle('active', isEditMode); if (isEditMode) initDragAndDrop(); else destroyDragAndDrop(); });
    function initDragAndDrop() { destroyDragAndDrop(); const mainContainer = document.querySelector('.main-content'); sortableInstances.push(new Sortable(mainContainer, { group:'sections', animation: 150, handle: '.drag-handle', filter: '.top-right-controls, #add-category-btn-container', onEnd: (evt) => { moveItem(appData.categories, evt.oldIndex, evt.newIndex); reRender(); if(isEditMode) initDragAndDrop(); }})); document.querySelectorAll('.card-grid').forEach(grid => { const catIndex = grid.closest('.content-section').dataset.catIndex; sortableInstances.push(new Sortable(grid, { group: 'cards', animation: 150, handle: '.drag-handle', onEnd: (evt) => { moveItem(appData.categories[catIndex].cards, evt.oldIndex, evt.newIndex); reRender(); if(isEditMode) initDragAndDrop(); }})); }); }
    function destroyDragAndDrop() { sortableInstances.forEach(s => s.destroy()); sortableInstances = []; }
    function updateTopControls() { document.getElementById('lang-switch-btn').textContent = appData.settings.lang === 'zh' ? 'EN' : 'ä¸­'; document.getElementById('theme-switch-btn').textContent = appData.settings.isDark ? 'â˜€ï¸' : 'ğŸŒ™'; }
    document.addEventListener('click', e => { if(e.target.id === 'lang-switch-btn') { appData.settings.lang = appData.settings.lang === 'zh' ? 'en' : 'zh'; reRender(); } if(e.target.id === 'theme-switch-btn') { appData.settings.isDark = !appData.settings.isDark; const currentTheme = appData.settings.theme; if(appData.settings.isDark){ if(currentTheme !== 'dark' && currentTheme !== 'hacker') appData.settings.theme = 'dark'; } else { if(currentTheme === 'dark' || currentTheme === 'hacker') appData.settings.theme = 'default'; } saveData(); applyTheme(); updateTopControls(); } });
    const qrModal = document.getElementById('qr-modal-overlay');
    const qrModalImg = document.getElementById('qr-modal-image');
    window.showQrCodeModal = (imgSrc) => { qrModalImg.src = imgSrc; qrModal.style.display = 'flex'; }
    function closeQrModal() { qrModal.style.display = 'none'; }
    document.getElementById('qr-modal-close').addEventListener('click', closeQrModal);
    qrModal.addEventListener('click', function(e) { if (e.target === this) closeQrModal(); });
    
    loadData(); renderAll();
});
</script>

</body>
</html>
