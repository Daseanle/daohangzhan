<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- [SEO] åŸºç¡€SEOæ ‡ç­¾ -->
    <title>æˆ‘çš„ä¸ªæ€§åŒ–å¯¼èˆªç«™</title> <!-- å°†ç”±JSåŠ¨æ€æ›´æ–° -->
    <meta name="description" content="ä¸€ä¸ªå®Œå…¨è‡ªç”±å®šåˆ¶çš„å¯¼èˆªç½‘ç«™ã€‚æ”¯æŒæ‹–æ‹½æ’åºã€å¢åˆ æ¨¡å—ã€ä¸»é¢˜åˆ‡æ¢å’Œé…ç½®å¯¼å…¥å¯¼å‡ºï¼Œæ‰“é€ å±äºä½ è‡ªå·±çš„æµè§ˆå™¨é¦–é¡µã€‚">
    <meta name="keywords" content="å¯¼èˆªç«™, ç½‘å€å¯¼èˆª, è‡ªå®šä¹‰é¦–é¡µ, æµè§ˆå™¨ä¸»é¡µ, ä¸ªæ€§åŒ–, ç¨‹åºå‘˜å¯¼èˆª, è®¾è®¡å¸ˆå¯¼èˆª, AIå·¥å…·, å¼€æº, Startpage, Homepage">
    <meta name="author" content="ä½ çš„åå­—æˆ–ID">
    <meta name="robots" content="index, follow">

    <!-- [SEO] Open Graph / Facebook / å¾®ä¿¡ -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://ä½ çš„ç”¨æˆ·å.github.io/ä½ çš„ä»“åº“å/">
    <meta property="og:title" content="æˆ‘çš„å®Œå…¨ä¸ªæ€§åŒ–å¯¼èˆªç«™">
    <meta property="og:description" content="ä¸€ä¸ªå®Œå…¨è‡ªç”±å®šåˆ¶çš„å¯¼èˆªç½‘ç«™ã€‚æ”¯æŒæ‹–æ‹½æ’åºã€å¢åˆ æ¨¡å—ã€ä¸»é¢˜åˆ‡æ¢å’Œé…ç½®å¯¼å…¥å¯¼å‡ºã€‚">
    <meta property="og:image" content="https://ä½ çš„é¢„è§ˆå›¾é“¾æ¥/preview.png">

    <!-- [SEO] Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://ä½ çš„ç”¨æˆ·å.github.io/ä½ çš„ä»“åº“å/">
    <meta property="twitter:title" content="æˆ‘çš„å®Œå…¨ä¸ªæ€§åŒ–å¯¼èˆªç«™">
    <meta property="twitter:description" content="ä¸€ä¸ªå®Œå…¨è‡ªç”±å®šåˆ¶çš„å¯¼èˆªç½‘ç«™ã€‚æ”¯æŒæ‹–æ‹½æ’åºã€å¢åˆ æ¨¡å—ã€ä¸»é¢˜åˆ‡æ¢å’Œé…ç½®å¯¼å…¥å¯¼å‡ºã€‚">
    <meta property="twitter:image" content="https://ä½ çš„é¢„è§ˆå›¾é“¾æ¥/preview.png">

    <!-- [SEO] Favicon - è¯·ä½¿ç”¨ realfavicongenerator.net ç”Ÿæˆå¹¶æ›¿æ¢ -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">

    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <style>
        /* CSSä»£ç ä¸ä¸Šä¸€ç‰ˆå®Œå…¨ç›¸åŒï¼Œæ­¤å¤„çœç•¥ä»¥èŠ‚çº¦ç¯‡å¹…ï¼Œè¯·ç›´æ¥ä½¿ç”¨ä¸Šä¸€ç‰ˆçš„CSS */
        :root, body[data-theme='default'] { --primary-color: #007bff; --bg-color: #f4f6f9; --card-bg-color: #ffffff; --text-color: #333; --text-secondary-color: #6c757d; --border-color: #e9ecef; --shadow-color: rgba(0, 0, 0, 0.05); --danger-color: #dc3545; --success-color: #28a745; }
        body[data-theme='dark'] { --primary-color: #4dabf7; --bg-color: #121212; --card-bg-color: #1e1e1e; --text-color: #e0e0e0; --text-secondary-color: #a0a0a0; --border-color: #333; --shadow-color: rgba(0, 0, 0, 0.2); --danger-color: #f06565; --success-color: #48cfae; }
        body[data-theme='retro'] { --primary-color: #c08d5d; --bg-color: #fdf6e3; --card-bg-color: #fbf1c7; --text-color: #654321; --text-secondary-color: #928374; --border-color: #d5c4a1; --shadow-color: rgba(146, 131, 116, 0.1); --danger-color: #c0392b; --success-color: #27ae60; }
        body[data-theme='hacker'] { --primary-color: #00ff00; --bg-color: #000; --card-bg-color: #0d0d0d; --text-color: #00ff00; --text-secondary-color: #00cc00; --border-color: #003300; --shadow-color: rgba(0, 255, 0, 0.1); --danger-color: #ff0000; --success-color: #00ff00; }
        * { margin: 0; padding: 0; box-sizing: border-box; } html { scroll-behavior: smooth; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background-color: var(--bg-color); color: var(--text-color); line-height: 1.6; transition: background-color 0.3s, color 0.3s; }
        a { text-decoration: none; color: var(--primary-color); transition: color 0.2s ease; } a:hover { color: color-mix(in srgb, var(--primary-color) 80%, black); }
        button { cursor: pointer; border: none; background: none; font-family: inherit; }
        .container { display: flex; max-width: 1600px; margin: 0 auto; }
        .sidebar { width: 220px; height: 100vh; position: sticky; top: 0; background-color: var(--card-bg-color); border-right: 1px solid var(--border-color); padding: 20px 0; overflow-y: auto; flex-shrink: 0; display: flex; flex-direction: column; transition: background-color 0.3s; }
        .sidebar-title { display: flex; justify-content: space-between; align-items: center; font-size: 1.5em; font-weight: 600; padding: 0 20px 10px; border-bottom: 1px solid var(--border-color); margin-bottom: 10px; }
        .sidebar-title .title-content { flex-grow: 1; } .sidebar-title .title-content img { max-height: 28px; vertical-align: middle; }
        .sidebar nav { flex-grow: 1; } .sidebar nav ul { list-style: none; }
        .sidebar nav a { display: block; padding: 10px 20px; color: var(--text-secondary-color); font-weight: 500; border-left: 3px solid transparent; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .sidebar nav a:hover { color: var(--primary-color); background-color: var(--bg-color); }
        .sidebar-actions { padding: 10px 20px; border-top: 1px solid var(--border-color); }
        .sidebar-btn { display: flex; align-items: center; gap: 8px; width: 100%; padding: 10px; font-size: 1em; color: var(--text-secondary-color); border-radius: 6px; transition: all 0.2s; margin-top: 5px; }
        .sidebar-btn:hover { background-color: var(--bg-color); color: var(--primary-color); } .sidebar-btn svg { width: 18px; height: 18px; flex-shrink: 0; }
        .main-content { position: relative; flex-grow: 1; padding: 30px; }
        .content-section { margin-bottom: 50px; background: var(--card-bg-color); padding: 20px; border-radius: 8px; border: 1px solid transparent; transition: background-color 0.3s; }
        .section-header { display: flex; align-items: center; gap: 10px; margin-bottom: 25px; padding-bottom: 10px; border-bottom: 2px solid var(--border-color); }
        .section-header h2 { font-size: 2em; color: var(--text-color); flex-grow: 1; }
        .card-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 25px; }
        .card { background-color: var(--card-bg-color); border-radius: 8px; border: 1px solid var(--border-color); padding: 20px; box-shadow: 0 2px 8px var(--shadow-color); display: flex; flex-direction: column; }
        .card-header { display: flex; align-items: center; gap: 10px; margin-bottom: 15px; }
        .card-header h3 { font-size: 1.25em; color: var(--text-color); flex-grow: 1; }
        .card ul { list-style: none; } .link-list-default { display: flex; flex-wrap: wrap; gap: 10px; }
        .link-list-columns { column-count: 2; column-gap: 20px; }
        .card li { break-inside: avoid-column; page-break-inside: avoid; position: relative; margin-bottom: 10px; }
        .card li a { display: block; background-color: var(--bg-color); padding: 6px 12px; border-radius: 15px; font-size: 0.9em; color: var(--text-secondary-color); transition: all 0.2s; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .card li a:hover { background-color: var(--primary-color); color: #fff; }
        .controls, .drag-handle, .add-item-btn, #add-category-btn-container, .custom-link-actions { display: none; }
        body.edit-mode .controls, body.edit-mode .drag-handle, body.edit-mode .add-item-btn, body.edit-mode #add-category-btn-container { display: block; }
        body.edit-mode .drag-handle { cursor: move; color: var(--text-secondary-color); font-size: 20px; }
        body.edit-mode .card li:hover .custom-link-actions { display: flex; }
        body.edit-mode .content-section { border: 2px dashed var(--primary-color); }
        .sortable-ghost { opacity: 0.4; background: #c8ebfb; }
        #edit-mode-btn.active { background-color: var(--primary-color); color: white; }
        .controls { align-items: center; gap: 8px; flex-shrink: 0;}
        .control-btn { font-size: 16px; color: var(--text-secondary-color); transition: color 0.2s; line-height: 1; padding: 4px; border-radius: 4px; }
        .control-btn:hover { background-color: var(--bg-color); }
        .custom-link-actions { position: absolute; top: 50%; right: 5px; transform: translateY(-50%); gap: 4px; background: rgba(255,255,255,0.8); padding: 2px 5px; border-radius: 10px;}
        .link-action-btn { width: 20px; height: 20px; border-radius: 50%; background-color: rgba(0,0,0,0.6); color: white; font-size: 12px; display: flex; align-items: center; justify-content: center; line-height: 1; border: 1px solid white; }
        .add-item-btn button { width: 100%; padding: 8px; border: 1px dashed var(--border-color); border-radius: 6px; color: var(--text-secondary-color); transition: all 0.2s; }
        .add-item-btn button:hover { border-color: var(--primary-color); background-color: var(--bg-color); color: var(--primary-color); }
        .top-right-controls { position: absolute; top: 30px; right: 30px; display: flex; gap: 10px; align-items: center; background: var(--card-bg-color); padding: 5px 10px; border-radius: 20px; box-shadow: 0 2px 10px var(--shadow-color); z-index: 10; }
        .top-right-controls button { font-size: 16px; padding: 5px; color: var(--text-secondary-color); }
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); z-index: 1000; display: none; align-items: center; justify-content: center; }
        .modal-content { background: var(--card-bg-color); padding: 25px; border-radius: 8px; width: 90%; max-width: 500px; max-height: 80vh; overflow-y: auto; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid var(--border-color); }
        .modal-header h3 { font-size: 1.5em; } .close-btn { font-size: 1.8em; line-height: 1; color: var(--text-secondary-color); }
        .setting-section { margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px solid var(--border-color);}
        .setting-section:last-child { border-bottom: none; margin-bottom: 0; }
        .setting-section h4 { margin-bottom: 10px; font-size: 1.1em; }
        .modal-input { width: 100%; padding: 8px; border: 1px solid var(--border-color); border-radius: 5px; font-size: 1em; margin-bottom: 10px; background-color: var(--bg-color); color: var(--text-color); }
        .modal-btn { display: inline-block; padding: 8px 15px; border-radius: 5px; cursor: pointer; transition: background-color 0.2s; color: white; margin-right: 10px; margin-bottom: 5px;}
        #save-title-btn, #import-config-label, #import-bookmarks-label { background-color: var(--primary-color); }
        #export-btn { background-color: var(--success-color); } #reset-btn { background-color: var(--danger-color); }
        #import-config-input, #import-bookmarks-input { display: none; }
        .setting-note { font-size: 0.85em; color: var(--text-secondary-color); margin-top: 8px; }
        .theme-selector { display: flex; gap: 15px; } .theme-option { cursor: pointer; }
        .theme-swatch { width: 30px; height: 30px; border-radius: 50%; border: 2px solid var(--border-color); }
        .theme-option input { display: none; }
        .theme-option input:checked + .theme-swatch { border-color: var(--primary-color); transform: scale(1.1); box-shadow: 0 0 10px var(--primary-color); }
        #swatch-default { background: #f4f6f9; } #swatch-dark { background: #1e1e1e; }
        #swatch-retro { background: #fbf1c7; } #swatch-hacker { background: #0d0d0d; }
        @media (max-width: 992px) {
            .container { flex-direction: column; }
            .sidebar { width: 100%; height: auto; position: sticky; top: 0; z-index: 100; flex-direction: row; align-items: center; padding: 0; }
            .sidebar-title { padding-left: 15px; padding-right: 15px; }
            .sidebar nav { flex-grow: 1; display: flex; overflow-x: auto; } .sidebar nav ul { display: flex; }
            .sidebar nav a { padding: 15px; border-left: none; border-bottom: 3px solid transparent; }
            .sidebar-actions { padding: 0 5px; border-top: none; border-left: 1px solid var(--border-color); display:flex; }
            .sidebar-btn { padding: 15px 10px; margin-top: 0; }
            .main-content { padding: 20px; padding-top: 70px; }
            .top-right-controls { top: 10px; right: 15px; }
            .card-grid { grid-template-columns: 1fr; }
            .link-list-columns { column-count: 1; }
        }
    </style>
</head>
<body>

    <div class="container">
        <aside class="sidebar">
            <div class="sidebar-title" id="sidebar-title-container"></div>
            <nav id="sidebar-nav"></nav>
            <div class="sidebar-actions">
                <button id="edit-mode-btn" class="sidebar-btn" title="é¡µé¢ç¼–è¾‘">
                    <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512" fill="currentColor"><path d="M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 252.7l22.6-22.6zM120 352.9l-33.9 9.9 9.9-33.9 194.3-194.3 24 24-194.3 194.3zM352 152.9l24 24 24-24-24-24-24 24z"/></svg>
                </button>
                <button id="settings-btn" class="sidebar-btn" title="è®¾ç½®">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="currentColor"><path d="M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9.9 15.9-19.4 15.9H181.8c-9.5 0-17.4-6.8-19.4-15.9l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L49.8 409.4c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C50.6 273.1 50 264.6 50 256s.6-17.1 1.7-25.4L7.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9.9-15.9 19.4-15.9h148.4c9.5 0 17.4 6.8 19.4 15.9l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"/></svg>
                </button>
            </div>
        </aside>

        <main class="main-content"></main>
    </div>

    <div id="settings-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header"><h3>å¯¼èˆªè®¾ç½®</h3><button class="close-btn" id="close-modal-btn">Ã—</button></div>
            <div id="modal-body">
                <div class="setting-section">
                    <h4>ä¸»é¢˜é€‰æ‹©</h4>
                    <div class="theme-selector" id="theme-selector">
                         <label class="theme-option"><input type="radio" name="theme" value="default"><div class="theme-swatch" id="swatch-default"></div></label>
                         <label class="theme-option"><input type="radio" name="theme" value="dark"><div class="theme-swatch" id="swatch-dark"></div></label>
                         <label class="theme-option"><input type="radio" name="theme" value="retro"><div class="theme-swatch" id="swatch-retro"></div></label>
                         <label class="theme-option"><input type="radio" name="theme" value="hacker"><div class="theme-swatch" id="swatch-hacker"></div></label>
                    </div>
                </div>
                <div class="setting-section">
                    <h4>ç½‘ç«™æ ‡é¢˜</h4>
                    <p class="setting-note">è®¾ç½®æ˜¾ç¤ºåœ¨æµè§ˆå™¨æ ‡ç­¾é¡µä¸Šçš„ç½‘ç«™æ ‡é¢˜ã€‚</p>
                    <input type="text" id="site-title-input" class="modal-input">
                    <button id="save-title-btn" class="modal-btn">ä¿å­˜æ ‡é¢˜</button>
                </div>
                 <div class="setting-section">
                    <h4>æ•°æ®ç®¡ç†</h4>
                    <p class="setting-note">å¯¼å‡ºé…ç½®å¯å¤‡ä»½æ‚¨çš„æ‰€æœ‰å¸ƒå±€å’Œé“¾æ¥ã€‚å¯¼å…¥é…ç½®ä¼šè¦†ç›–å½“å‰æ‰€æœ‰å†…å®¹ã€‚</p>
                    <button id="export-btn" class="modal-btn">å¯¼å‡ºé…ç½®</button>
                    <label for="import-config-input" id="import-config-label" class="modal-btn">å¯¼å…¥é…ç½®...</label>
                    <input type="file" id="import-config-input" accept=".json">
                    <button id="reset-btn" class="modal-btn">æ¢å¤é»˜è®¤</button>
                </div>
                <div class="setting-section">
                    <h4>ä¹¦ç­¾å·¥å…·</h4>
                    <p class="setting-note">ä»æµè§ˆå™¨å¯¼å‡ºçš„HTMLä¹¦ç­¾ï¼Œå°†æ™ºèƒ½è§£ææ–‡ä»¶å¤¹ä¸ºå¡ç‰‡ï¼Œå¹¶è‡ªåŠ¨å»é‡åæ·»åŠ åˆ°ç¬¬ä¸€ä¸ªåˆ†ç±»ä¸­ã€‚</p>
                    <label for="import-bookmarks-input" id="import-bookmarks-label" class="modal-btn">å¯¼å…¥HTMLä¹¦ç­¾...</label>
                    <input type="file" id="import-bookmarks-input" accept=".html,.htm">
                </div>
            </div>
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // --- 1. æ•°æ®ä¸è®¾ç½®ç®¡ç† ---
    // JavaScriptä»£ç ä¸ä¸Šä¸€ç‰ˆå®Œå…¨ç›¸åŒï¼Œæ­¤å¤„çœç•¥ä»¥èŠ‚çº¦ç¯‡å¹…ï¼Œè¯·ç›´æ¥ä½¿ç”¨ä¸Šä¸€ç‰ˆçš„JS
    const defaultData = { settings: { lang: "zh", theme: "default" }, siteTitle: { zh: "æˆ‘çš„ä¸ªæ€§åŒ–å¯¼èˆªç«™", en: "My Personalized Startpage" }, sidebarTitle: { zh: "å¯¼èˆªç«™", en: "Navigator" }, categories: [ { id: 'general-news', title: { zh: 'ç»¼åˆèµ„è®¯', en: 'General News' }, cards: [ { id: 'gn-1', title: { zh: 'ä¸»æµçƒ­ç‚¹', en: 'Trending' }, links: [ { name: { zh: 'å¾®åš-çƒ­æœ', en: 'Weibo Hot' }, url: 'https://s.weibo.com/top/summary' }, { name: { zh: 'ç™¾åº¦-çƒ­æœ', en: 'Baidu Hot' }, url: 'https://top.baidu.com/board?tab=realtime' }, { name: { zh: 'ä»Šæ—¥å¤´æ¡-çƒ­æ¦œ', en: 'Toutiao' }, url: 'https://www.toutiao.com/trending/' }, { name: { zh: 'æŠ–éŸ³-çƒ­ç‚¹æ¦œ', en: 'Douyin Hot' }, url: 'https://www.douyin.com/hot' }, { name: { zh: 'å¿«æ‰‹-çƒ­æ¦œ', en: 'Kuaishou' }, url: 'https://www.kuaishou.com/brilliant' }, ]}, { id: 'gn-2', title: { zh: 'æ·±åº¦é˜…è¯»', en: 'In-Depth' }, links: [ { name: { zh: 'çŸ¥ä¹-çƒ­æ¦œ', en: 'Zhihu Hot' }, url: 'https://www.zhihu.com/hot' }, { name: { zh: 'å¾®ä¿¡-çƒ­é—¨', en: 'WeChat' }, url: 'https://weixin.sogou.com/' }, { name: { zh: 'æ¾æ¹ƒæ–°é—»-çƒ­æ¦œ', en: 'The Paper' }, url: 'https://www.thepaper.cn/hot-news' }, { name: { zh: '36æ°ª-çƒ­æ¦œ', en: '36Kr' }, url: 'https://36kr.com/hot-list/zonghe' }, { name: { zh: 'å°‘æ•°æ´¾-çƒ­æ¦œ', en: 'SSPAI' }, url: 'https://sspai.com/hot' }, { name: { zh: 'Readhub', en: 'Readhub' }, url: 'https://readhub.cn/' }, ]}, { id: 'gn-3', title: { zh: 'ç™¾ç§‘çŸ¥è¯†', en: 'Wiki & Knowledge' }, links: [ { name: { zh: 'å†å²ä¸Šçš„ä»Šå¤©', en: 'On This Day' }, url: 'https://www.todayonhistory.com/' }, { name: { zh: 'ç™¾åº¦-ç™¾ç§‘', en: 'Baidu Baike' }, url: 'https://baike.baidu.com/' }, { name: { zh: 'ç»´åŸºç™¾ç§‘-ä¸­æ–‡', en: 'Wikipedia (ZH)' }, url: 'https://zh.wikipedia.org/' }, { name: { zh: 'çŸ¥ä¹æ—¥æŠ¥', en: 'Zhihu Daily' }, url: 'https://daily.zhihu.com/' }, ]} ] }, { id: 'ai-era', title: { zh: 'AI çºªå…ƒ', en: 'AI Era' }, cards: [ { id: 'ai-1', title: { zh: 'AI å¿«è®¯', en: 'AI News' }, links: [ { name: { zh: 'é‡å­ä½-é¦–é¡µ', en: 'QbitAI' }, url: 'https://www.qbitai.com/' }, { name: { zh: 'æœºå™¨ä¹‹å¿ƒ-çƒ­æ¦œ', en: 'JiQZhiXin' }, url: 'https://www.jiqizhixin.com/hot-list' }, { name: { zh: 'APlay-AIæ—¥æŠ¥', en: 'APlay Daily' }, url: 'https://www.aplay.ai/' }, { name: { zh: 'Hugging Face-è¶‹åŠ¿', en: 'HF Trending' }, url: 'https://huggingface.co/trending' }, ]}, { id: 'ai-2', title: { zh: 'AI äº§å“ä¸åº”ç”¨', en: 'AI Products' }, links: [ { name: { zh: 'Product Hunt - AI', en: 'Product Hunt AI' }, url: 'https://www.producthunt.com/categories/artificial-intelligence' }, { name: { zh: 'There\'s An AI For That', en: 'TAAFT' }, url: 'https://theresanaiforthat.com/' }, { name: { zh: 'æœªæ¥ç™¾ç§‘', en: 'Futurepedia' }, url: 'https://www.futurepedia.io/' }, { name: { zh: 'Replicate - Explore', en: 'Replicate' }, url: 'https://replicate.com/explore' }, ]}, { id: 'ai-3', title: { zh: 'å‰æ²¿è®ºæ–‡', en: 'Papers' }, links: [ { name: { zh: 'arXiv - äººå·¥æ™ºèƒ½', en: 'arXiv - AI' }, url: 'https://arxiv.org/list/cs.AI/new' }, { name: { zh: 'Papers with Code', en: 'Papers with Code' }, url: 'https://paperswithcode.com/trending' }, ]} ] }, { id: 'tech-frontier', title: { zh: 'ç§‘æŠ€å‰æ²¿', en: 'Tech Frontier' }, cards: [ { id: 'tf-1', title: { zh: 'ç§‘æŠ€é—¨æˆ·', en: 'Tech Portals' }, links: [ { name: { zh: 'è™å—…ç½‘-çƒ­æ¦œ', en: 'Huxiu' }, url: 'https://www.huxiu.com/hot.html' }, { name: { zh: 'ITä¹‹å®¶-çƒ­æ¦œ', en: 'ITHOME' }, url: 'https://www.ithome.com/rank' }, { name: { zh: 'cnBeta-çƒ­é—¨', en: 'cnBeta' }, url: 'https://hot.cnbeta.com/' }, { name: { zh: 'InfoQ-çƒ­ç‚¹', en: 'InfoQ' }, url: 'https://www.infoq.cn/hot' }, { name: { zh: 'å¼€å‘è€…å¤´æ¡', en: 'Toutiao.io' }, url: 'https://toutiao.io/' }, ]}, { id: 'tf-2', title: { zh: 'å¼€å‘è€…ç¤¾åŒº', en: 'Dev Community' }, links: [ { name: { zh: 'GitHub-è¶‹åŠ¿', en: 'GitHub Trending' }, url: 'https://github.com/trending' }, { name: { zh: 'V2EX-æœ€çƒ­', en: 'V2EX Hot' }, url: 'https://www.v2ex.com/?tab=hot' }, { name: { zh: 'ç¨€åœŸæ˜é‡‘-çƒ­æ¦œ', en: 'Juejin Hot' }, url: 'https://juejin.cn/hot/articles' }, { name: { zh: 'CSDN-çƒ­æ¦œ', en: 'CSDN Hot' }, url: 'https://blog.csdn.net/hot-articles' }, { name: { zh: 'StackOverflow-çƒ­é—¨', en: 'StackOverflow' }, url: 'https://stackoverflow.com/questions' }, { name: { zh: 'HelloGitHub', en: 'HelloGitHub' }, url: 'https://hellogithub.com/' }, ]}, { id: 'tf-3', title: { zh: 'ç¡¬æ ¸æå®¢', en: 'Geeks' }, links: [ { name: { zh: 'å¾çˆ±ç ´è§£-çƒ­å¸–', en: '52Pojie' }, url: 'https://www.52pojie.cn/forum.php?mod=guide&view=hot' }, { name: { zh: 'Chiphell-çƒ­å¸–', en: 'Chiphell' }, url: 'https://www.chiphell.com/forum.php?mod=guide&view=hot' }, { name: { zh: 'FreeCodeCamp', en: 'FreeCodeCamp' }, url: 'https://www.freecodecamp.org/news/' }, ]} ] }, { id: 'career-growth', title: { zh: 'èŒåœºæˆé•¿', en: 'Career Growth' }, cards: [ { id: 'cg-1', title: { zh: 'è¡Œä¸šæ´å¯Ÿ', en: 'Insights' }, links: [ { name: { zh: 'è„‰è„‰-çƒ­æ¦œ', en: 'Maimai' }, url: 'https://maimai.cn/web/gossip/' }, { name: { zh: 'é¢†è‹±-æ¯æ—¥å¿…è¯»', en: 'LinkedIn News' }, url: 'https://www.linkedin.com/news/' }, { name: { zh: 'ç¬¬ä¸€è´¢ç»', en: 'Yicai' }, url: 'https://www.yicai.com/' }, { name: { zh: 'åå°”è¡—è§é—»', en: 'Wallstreetcn' }, url: 'https://wallstreetcn.com/' }, ]}, { id: 'cg-2', title: { zh: 'æ±‚èŒæ‹›è˜', en: 'Jobs' }, links: [ { name: { zh: 'ç‰›å®¢ç½‘-è®¨è®ºåŒº', en: 'Nowcoder' }, url: 'https://www.nowcoder.com/discuss' }, { name: { zh: 'Bossç›´è˜-èµ„è®¯', en: 'Zhipin' }, url: 'https://www.zhipin.com/media/news/' }, { name: { zh: 'æ‹‰å‹¾-è¨€èŒ', en: 'Lagou' }, url: 'https://www.lagou.com/active' }, ]}, { id: 'cg-3', title: { zh: 'åˆ›ä¸šä¸å‰¯ä¸š', en: 'Startups' }, links: [ { name: { zh: 'Indie Hackers', en: 'Indie Hackers' }, url: 'https://www.indiehackers.com/' }, { name: { zh: 'å°æŠ¥ç«¥-çƒ­é—¨', en: 'Xiaobot' }, url: 'https://xiaobot.net/hot_products' }, { name: { zh: 'å³åˆ»-åˆ›ä¸šåœˆ', en: 'Jike' }, url: 'https://web.okjike.com/discover' }, ]} ] }, { id: 'community-buzz', title: { zh: 'ç¤¾åŒºçƒ­è®®', en: 'Community Buzz' }, cards: [ { id: 'cb-1', title: { zh: 'ç»¼åˆè®¨è®º', en: 'General' }, links: [ { name: { zh: 'è™æ‰‘-æ­¥è¡Œè¡—', en: 'Hupu' }, url: 'https://bbs.hupu.com/all-gambia' }, { name: { zh: 'è´´å§-çƒ­è®®æ¦œ', en: 'Tieba' }, url: 'https://tieba.baidu.com/hottopic/browse/topicList' }, { name: { zh: 'NGA-çƒ­å¸–', en: 'NGA' }, url: 'https://bbs.nga.cn/thread.php?fid=-7' }, { name: { zh: 'Reddit-çƒ­é—¨', en: 'Reddit' }, url: 'https://www.reddit.com/hot/' }, ]}, { id: 'cb-2', title: { zh: 'å…´è¶£å°ç»„', en: 'Groups' }, links: [ { name: { zh: 'è±†ç“£-å°ç»„', en: 'Douban' }, url: 'https://www.douban.com/group/explore' }, { name: { zh: 'å°çº¢ä¹¦-çƒ­é—¨', en: 'Xiaohongshu' }, url: 'https://www.xiaohongshu.com/explore' }, { name: { zh: 'å³åˆ»-åœˆå­', en: 'Jike' }, url: 'https://web.okjike.com/discover' }, ]}, { id: 'cb-3', title: { zh: 'æ€€æ—§ç¤¾åŒº', en: 'Vintage' }, links: [ { name: { zh: 'æ°´æœ¨ç¤¾åŒº-çƒ­ç‚¹', en: 'NewSMTH' }, url: 'https://www.newsmth.net/nForum/#!hot' }, { name: { zh: 'æœå£³çƒ­ç‚¹', en: 'Guokr' }, url: 'https://www.guokr.com/hot/' }, ]} ] }, { id: 'entertainment-lifestyle', title: { zh: 'å¨±ä¹ç”Ÿæ´»', en: 'Entertainment' }, cards: [ { id: 'el-1', title: { zh: 'å½±éŸ³çƒ­æ¦œ', en: 'Video/TV' }, links: [ { name: { zh: 'å“”å“©å“”å“©-çƒ­é—¨', en: 'Bilibili' }, url: 'https://www.bilibili.com/v/popular/all' }, { name: { zh: 'è±†ç“£-æ–°ç‰‡æ¦œ', en: 'Douban Movie' }, url: 'https://movie.douban.com/chart' }, { name: { zh: 'å¾®åš-è¶…è¯', en: 'Weibo Topic' }, url: 'https://weibo.com/p/100808_-_chaohua' }, { name: { zh: 'çŒ«çœ¼-ç”µå½±æ¦œ', en: 'Maoyan' }, url: 'https://www.maoyan.com/board' }, { name: { zh: 'è…¾è®¯è§†é¢‘-çƒ­æœ', en: 'Tencent Video' }, url: 'https://v.qq.com/x/hotlist/' }, { name: { zh: 'çˆ±å¥‡è‰º-çƒ­æ’­', en: 'iQIYI' }, url: 'https://www.iqiyi.com/rank/' }, ]}, { id: 'el-2', title: { zh: 'æ¸¸æˆä¸–ç•Œ', en: 'Gaming' }, links: [ { name: { zh: 'Steam-çƒ­é”€æ¦œ', en: 'Steam' }, url: 'https://store.steampowered.com/search/?filter=topsellers' }, { name: { zh: 'TapTap-çƒ­é—¨æ¦œ', en: 'TapTap' }, url: 'https://www.taptap.cn/top/played' }, { name: { zh: 'æ¸¸æ°‘æ˜Ÿç©º-çƒ­ç‚¹', en: 'Gamersky' }, url: 'https://www.gamersky.com/news/' }, { name: { zh: 'æœºæ ¸-èµ„è®¯', en: 'Gcores' }, url: 'https://www.gcores.com/news' }, { name: { zh: 'IGN-çƒ­é—¨', en: 'IGN' }, url: 'https://www.ign.com/' }, ]}, { id: 'el-3', title: { zh: 'ç”Ÿæ´»è¶£å‘³', en: 'Lifestyle' }, links: [ { name: { zh: 'ä¸‹å¨æˆ¿-èœè°±', en: 'Xiachufang' }, url: 'https://www.xiachufang.com/explore/' }, { name: { zh: 'é©¬èœ‚çª-æ¸¸è®°', en: 'Mafengwo' }, url: 'http://www.mafengwo.cn/travel-scenic-spot/mafengwo/10186.html' }, { name: 'ç…è›‹-æ— èŠå›¾', url: 'https://jandan.net/pic' }, { name: 'ç³—äº‹ç™¾ç§‘', url: 'https://www.qiushibaike.com/hot/' }, ]} ] }, { id: 'design-creativity', title: { zh: 'çµæ„Ÿåˆ›æ„', en: 'Creativity' }, cards: [ { id: 'dc-1', title: { zh: 'è®¾è®¡çµæ„Ÿ', en: 'Design' }, links: [ { name: 'ç«™é…·-äººæ°”æ¦œ', url: 'https://www.zcool.com.cn/discover/0!0!0!0!0!!!!-1!1' }, { name: 'Behance-ç²¾é€‰', url: 'https://www.behance.net/galleries' }, { name: 'Dribbble-æµè¡Œ', url: 'https://dribbble.com/shots' }, { name: 'UIä¸­å›½-æ¨è', url: 'https://www.ui.cn/' }, ]}, { id: 'dc-2', title: { zh: 'åˆ›æ„å‘ç°', en: 'Discovery' }, links: [ { name: 'èŠ±ç“£-çƒ­é—¨', url: 'https://huaban.com/discovery/' }, { name: 'LOFTER-æ’ç”»æ¦œ', url: 'https://www.lofter.com/tag/æ’ç”»' }, { name: 'Unsplash-çƒ­é—¨', url: 'https://unsplash.com/' }, { name: 'Pixiv-æ—¥æ¦œ', url: 'https://www.pixiv.net/ranking.php' }, { name: '500px-æµè¡Œ', url: 'https://500px.com/popular' }, ]} ] }, { id: 'shopping-deals', title: { zh: 'æ¶ˆè´¹æŒ‡å—', en: 'Shopping' }, cards: [ { id: 'sd-1', title: { zh: 'å¥½ä»·æ¨è', en: 'Deals' }, links: [ { name: 'ä»€ä¹ˆå€¼å¾—ä¹°', url: 'https://www.smzdm.com/haojia/' }, { name: 'åŒ—ç¾çœé’±å¿«æŠ¥', url: 'https://www.dealmoon.com/' }, { name: 'é›ªçƒ-çƒ­é—¨', url: 'https://xueqiu.com/' }, ]}, { id: 'sd-2', title: { zh: 'ç”µå•†çƒ­å–', en: 'E-commerce' }, links: [ { name: 'æ·˜å®-çƒ­é”€', url: 'https://remai.taobao.com/' }, { name: 'äº¬ä¸œ-çƒ­å–', url: 'https://www.jd.com/phb.html' }, { name: 'æ‹¼å¤šå¤š-çƒ­æ¦œ', url: 'https://mobile.pinduoduo.com/ranking.html' }, { name: 'äºšé©¬é€Š-å›¾ä¹¦', url: 'https://www.amazon.cn/gp/bestsellers/books' }, ]}, { id: 'sd-3', title: { zh: 'å“è´¨ç”Ÿæ´»', en: 'Quality Life' }, links: [ { name: 'å°ç±³æœ‰å“-çƒ­é”€', url: 'https://www.xiaomiyoupin.com/hot' }, { name: 'ç½‘æ˜“ä¸¥é€‰-çƒ­é”€', url: 'https://you.163.com/' }, { name: 'é—²é±¼-çƒ­é—¨', url: 'https://g.alicdn.com/idle-fish-web/homepage/' }, ]} ] }, { id: 'global-view', title: { zh: 'å…¨çƒè§†é‡', en: 'Global View' }, cards: [ { id: 'gv-1', title: { zh: 'å›½é™…é€šè®¯ç¤¾', en: 'News Agencies' }, links: [ { name: 'è·¯é€ç¤¾ (Reuters)', url: 'https://www.reuters.com/' }, { name: 'ç¾è”ç¤¾ (AP)', url: 'https://apnews.com/' }, { name: 'BBC News', url: 'https://www.bbc.com/news' }, { name: 'çº½çº¦æ—¶æŠ¥ (NYT)', url: 'https://www.nytimes.com/' }, ]}, { id: 'gv-2', title: { zh: 'ç§‘æŠ€ä¸å•†ä¸š', en: 'Tech & Biz' }, links: [ { name: 'Hacker News', url: 'https://news.ycombinator.com/' }, { name: 'TechCrunch', url: 'https://techcrunch.com/' }, { name: 'The Verge', url: 'https://www.theverge.com/' }, { name: 'å½­åšç¤¾ (Bloomberg)', url: 'https://www.bloomberg.com/' }, { name: 'ç»æµå­¦äºº (Economist)', url: 'https://www.economist.com/' }, ]} ] }, { id: 'academic-research', title: { zh: 'å­¦æœ¯æ¢ç´¢', en: 'Academic' }, cards: [ { id: 'ar-1', title: { zh: 'é«˜æ ¡BBS', en: 'University BBS' }, links: [ { name: 'åŒ—å¤§æœªåBBS', url: 'https://bbs.pku.edu.cn/v2/home.php' }, { name: 'æ¸…åæ°´æœ¨ç¤¾åŒº', url: 'https://www.newsmth.net/' }, { name: 'å¤æ—¦æ—¥æœˆå…‰å', url: 'https://bbs.fudan.edu.cn/bbs/main' }, { name: 'ä¸Šäº¤é¥®æ°´æ€æº', url: 'https://bbs.sjtu.edu.cn/' }, ]}, { id: 'ar-2', title: { zh: 'å­¦æœ¯èµ„æº', en: 'Resources' }, links: [ { name: 'è°·æ­Œå­¦æœ¯', url: 'https://scholar.google.com/' }, { name: 'çŸ¥ç½‘-çƒ­ç‚¹æ–‡çŒ®', url: 'https://kns.cnki.net/kns/hotspot?type=0' }, ]} ] } ]
    };
    let appData;
    function loadData() {
        let data = localStorage.getItem('navData');
        if (data) { 
            appData = JSON.parse(data);
            if (!appData.settings || !appData.sidebarTitle) { // Backward compatibility
                const oldTitle = appData.siteTitle;
                appData = JSON.parse(JSON.stringify(defaultData));
                appData.siteTitle.zh = oldTitle || defaultData.siteTitle.zh;
                appData.siteTitle.en = oldTitle || defaultData.siteTitle.en;
            }
        } else { appData = JSON.parse(JSON.stringify(defaultData)); }
    }
    function saveData() { localStorage.setItem('navData', JSON.stringify(appData)); }
    const _t = (textObj) => { if(typeof textObj !== 'object' || textObj === null) return textObj; return textObj[appData.settings.lang] || textObj.zh || textObj.en || ''; }
    function applyTheme() { document.body.dataset.theme = appData.settings.theme; }
    const mainContent = document.querySelector('.main-content');
    const sidebarNav = document.getElementById('sidebar-nav');
    const sidebarTitleContainer = document.getElementById('sidebar-title-container');
    function renderAll() {
        applyTheme(); document.title = _t(appData.siteTitle);
        sidebarTitleContainer.innerHTML = `<div class="title-content">${_t(appData.sidebarTitle)}</div><div class="controls"><button class="control-btn" onclick="editSidebarTitle()">âœï¸</button></div>`;
        sidebarNav.innerHTML = `<ul>${appData.categories.map(c => `<li><a href="#${c.id}">${_t(c.title)}</a></li>`).join('')}</ul>`;
        renderMainContent();
    }
    function renderMainContent() {
        mainContent.querySelector('.top-right-controls')?.remove();
        const contentHTML = appData.categories.map((category, catIndex) => {
            const cardsHTML = category.cards.map((card, cardIndex) => {
                const listClass = card.links.length > 8 ? 'link-list-columns' : 'link-list-default';
                const linksHTML = card.links.map((link, linkIndex) => `<li><a href="${link.url}" target="_blank" title="${_t(link.name)}">${_t(link.name)}</a><div class="custom-link-actions"><button class="link-action-btn" title="ç¼–è¾‘" onclick="editLink(${catIndex},${cardIndex},${linkIndex})">âœï¸</button><button class="link-action-btn" title="åˆ é™¤" onclick="deleteLink(${catIndex},${cardIndex},${linkIndex})">Ã—</button></div></li>`).join('');
                return `<div class="card" data-card-index="${cardIndex}"><div class="card-header"><div class="drag-handle">â ¿</div><h3>${_t(card.title)}</h3><div class="controls"><button title="ä¸Šç§»" onclick="moveCard(${catIndex},${cardIndex},-1)">ğŸ”¼</button><button title="ä¸‹ç§»" onclick="moveCard(${catIndex},${cardIndex},1)">ğŸ”½</button><button title="ç¼–è¾‘" onclick="editCardTitle(${catIndex},${cardIndex})">âœï¸</button><button title="åˆ é™¤" onclick="deleteCard(${catIndex},${cardIndex})">âŒ</button></div></div><ul class="${listClass}">${linksHTML}</ul><div class="add-item-btn"><button onclick="addLink(${catIndex},${cardIndex})">+ ${_t({zh:"æ·»åŠ é“¾æ¥", en:"Add Link"})}</button></div></div>`;
            }).join('');
            return `<section id="${category.id}" class="content-section" data-cat-index="${catIndex}"><div class="section-header"><div class="drag-handle">â ¿</div><h2>${_t(category.title)}</h2><div class="controls"><button title="ä¸Šç§»" onclick="moveCategory(${catIndex},-1)">ğŸ”¼</button><button title="ä¸‹ç§»" onclick="moveCategory(${catIndex},1)">ğŸ”½</button><button title="ç¼–è¾‘" onclick="editCategoryTitle(${catIndex})">âœï¸</button><button title="åˆ é™¤" onclick="deleteCategory(${catIndex})">âŒ</button></div></div><div class="card-grid">${cardsHTML}</div><div class="add-item-btn"><button onclick="addCard(${catIndex})">+ ${_t({zh:"æ·»åŠ å¡ç‰‡", en:"Add Card"})}</button></div></section>`;
        }).join('') + `<div id="add-category-btn-container" class="add-item-btn"><button onclick="addCategory()">+ ${_t({zh:"æ·»åŠ åˆ†ç±»", en:"Add Category"})}</button></div>`;
        mainContent.innerHTML = `<div class="top-right-controls"><button id="lang-switch-btn"></button><button id="theme-switch-btn"></button></div>` + contentHTML;
        updateTopControls();
    }
    const reRender = () => { saveData(); renderAll(); };
    const moveItem = (arr, from, to) => { const item = arr.splice(from, 1)[0]; arr.splice(to, 0, item); };
    const createI18nObject = (val) => ({ zh: val, en: val });
    window.editSidebarTitle = () => { const newTitle = prompt(`${_t({zh:"è¾“å…¥ç«™ç‚¹æ ‡è¯†", en:"Enter site identity"})}:`, _t(appData.sidebarTitle)); if (newTitle !== null) { appData.sidebarTitle[appData.settings.lang] = newTitle; reRender(); }};
    window.addCategory = () => { const title = prompt("æ–°åˆ†ç±»æ ‡é¢˜:"); if(title) appData.categories.push({ id: `c_${Date.now()}`, title: createI18nObject(title), cards: [] }); reRender(); };
    window.deleteCategory = (i) => { if (confirm(`${_t({zh:"ç¡®è®¤åˆ é™¤", en:"Confirm delete"})}: "${_t(appData.categories[i].title)}"?`)) { appData.categories.splice(i, 1); reRender(); }};
    window.editCategoryTitle = (i) => { const newTitle = prompt("æ–°æ ‡é¢˜:", _t(appData.categories[i].title)); if(newTitle !== null) { appData.categories[i].title[appData.settings.lang] = newTitle; reRender(); }};
    window.moveCategory = (i, dir) => { const to = i + dir; if (to >= 0 && to < appData.categories.length) { moveItem(appData.categories, i, to); reRender(); } };
    window.addCard = (catIdx) => { const title = prompt("æ–°å¡ç‰‡æ ‡é¢˜:"); if(title) { appData.categories[catIdx].cards.push({ id: `card_${Date.now()}`, title: createI18nObject(title), links: [] }); reRender(); }};
    window.deleteCard = (catIdx, cardIdx) => { if (confirm(`${_t({zh:"ç¡®è®¤åˆ é™¤", en:"Confirm delete"})}: "${_t(appData.categories[catIdx].cards[cardIdx].title)}"?`)) { appData.categories[catIdx].cards.splice(cardIdx, 1); reRender(); }};
    window.editCardTitle = (catIdx, cardIdx) => { const newTitle = prompt("æ–°æ ‡é¢˜:", _t(appData.categories[catIdx].cards[cardIdx].title)); if(newTitle !== null) { appData.categories[catIdx].cards[cardIdx].title[appData.settings.lang] = newTitle; reRender(); }};
    window.moveCard = (catIdx, cardIdx, dir) => { const cards = appData.categories[catIdx].cards; const to = cardIdx + dir; if(to >= 0 && to < cards.length) { moveItem(cards, cardIdx, to); reRender(); } };
    window.addLink = (catIdx, cardIdx) => { const name = prompt("ç½‘ç«™åç§°:"); if(!name) return; const url = prompt("ç½‘ç«™åœ°å€:", "https://"); if(!url) return; appData.categories[catIdx].cards[cardIdx].links.push({ name: createI18nObject(name), url }); reRender(); };
    window.editLink = (catIdx, cardIdx, linkIdx) => { const l = appData.categories[catIdx].cards[cardIdx].links[linkIdx]; const name = prompt("æ–°åç§°:", _t(l.name)); if(name === null) return; const url = prompt("æ–°åœ°å€:", l.url); if(url === null) return; l.name[appData.settings.lang] = name; l.url = url; reRender(); };
    window.deleteLink = (catIdx, cardIdx, linkIdx) => { if (confirm(`${_t({zh:"ç¡®è®¤åˆ é™¤", en:"Confirm delete"})}: "${_t(appData.categories[catIdx].cards[cardIdx].links[linkIdx].name)}"?`)) { appData.categories[catIdx].cards[cardIdx].links.splice(linkIdx, 1); reRender(); }};
    
    const modal = document.getElementById('settings-modal');
    document.getElementById('settings-btn').addEventListener('click', () => { document.getElementById('site-title-input').value = _t(appData.siteTitle); document.querySelector(`.theme-option input[value="${appData.settings.theme}"]`).checked = true; modal.style.display = 'flex'; });
    document.getElementById('close-modal-btn').addEventListener('click', () => modal.style.display = 'none');
    modal.addEventListener('click', (e) => { if (e.target === modal) modal.style.display = 'none'; });
    
    document.getElementById('theme-selector').addEventListener('change', e => { appData.settings.theme = e.target.value; appData.settings.isDark = (e.target.value === 'dark' || e.target.value === 'hacker'); saveData(); applyTheme(); updateTopControls(); });
    document.getElementById('save-title-btn').addEventListener('click', () => { const newTitle = document.getElementById('site-title-input').value.trim(); if (newTitle) { appData.siteTitle[appData.settings.lang] = newTitle; reRender(); alert('ç½‘ç«™æ ‡é¢˜å·²æ›´æ–°ï¼'); } else { alert('æ ‡é¢˜ä¸èƒ½ä¸ºç©ºï¼'); }});
    document.getElementById('reset-btn').addEventListener('click', () => { if(confirm(_t({zh:'è­¦å‘Šï¼šæ­¤æ“ä½œå°†åˆ é™¤æ‰€æœ‰è‡ªå®šä¹‰å†…å®¹ï¼Œæ¢å¤åˆ°åˆå§‹å¸ƒå±€ï¼Œç¡®å®šè¦ç»§ç»­å—ï¼Ÿ', en:'Warning: This will delete all your customizations and restore the default layout. Are you sure?'}))) { localStorage.removeItem('navData'); loadData(); reRender(); alert(_t({zh:'å·²æ¢å¤ä¸ºé»˜è®¤å¸ƒå±€ã€‚', en:'Default layout has been restored.'})); modal.style.display = 'none'; } });
    document.getElementById('export-btn').addEventListener('click', () => { const dataStr = JSON.stringify(appData, null, 2); const blob = new Blob([dataStr], {type: 'application/json'}); const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = `nav-config-${new Date().toISOString().slice(0,10)}.json`; a.click(); URL.revokeObjectURL(a.href); });
    document.getElementById('import-config-input').addEventListener('change', (e) => { const file = e.target.files[0]; if (!file) return; const reader = new FileReader(); reader.onload = (re) => { try { const importedData = JSON.parse(re.target.result); if (importedData && Array.isArray(importedData.categories)) { if (confirm(_t({zh:'è¿™å°†è¦†ç›–æ‚¨å½“å‰çš„å…¨éƒ¨å¸ƒå±€å’Œé“¾æ¥ï¼Œç¡®å®šè¦å¯¼å…¥å—ï¼Ÿ', en:'This will overwrite your current layout and links. Are you sure?'}))) { appData = importedData; reRender(); alert('é…ç½®å·²æˆåŠŸå¯¼å…¥ï¼'); modal.style.display = 'none'; } } else { alert('æ–‡ä»¶æ ¼å¼æ— æ•ˆã€‚'); } } catch (err) { alert('è§£ææ–‡ä»¶å¤±è´¥ã€‚'); } finally { e.target.value = ''; } }; reader.readAsText(file); });
    document.getElementById('import-bookmarks-input').addEventListener('change', (e) => { const file = e.target.files[0]; if (!file) return; const reader = new FileReader(); reader.onload = (re) => { const parser = new DOMParser(); const doc = parser.parseFromString(re.target.result, "text/html"); let importedCount = 0; if (appData.categories.length === 0) appData.categories.push({ id: `c_${Date.now()}`, title: createI18nObject("å¯¼å…¥çš„ä¹¦ç­¾"), cards: [] }); const targetCategory = appData.categories[0]; const allUrlsInCategory = new Set(targetCategory.cards.flatMap(c => c.links.map(l => l.url))); const dts = doc.body.querySelectorAll('dl > dt'); let looseLinks = []; dts.forEach(dt => { const h3 = dt.querySelector('h3'); const a = dt.querySelector('a'); if (h3) { const folderName = h3.textContent.trim(); const newCard = { id: `card_${Date.now()}`, title: createI18nObject(folderName), links: [] }; const linkDl = dt.nextElementSibling; if(linkDl && linkDl.tagName === 'DL') { linkDl.querySelectorAll('a').forEach(linkNode => { const name = linkNode.textContent.trim(); const url = linkNode.href; if (name && url && !url.startsWith('javascript:') && !allUrlsInCategory.has(url)) { newCard.links.push({ name: createI18nObject(name), url }); allUrlsInCategory.add(url); importedCount++; } }); } if(newCard.links.length > 0) targetCategory.cards.push(newCard); } else if (a) { const name = a.textContent.trim(); const url = a.href; if (name && url && !url.startsWith('javascript:') && !allUrlsInCategory.has(url)) { looseLinks.push({ name: createI18nObject(name), url }); allUrlsInCategory.add(url); importedCount++; } } }); if (looseLinks.length > 0) { let uncatCard = targetCategory.cards.find(c => _t(c.title) === "æœªåˆ†ç±»ä¹¦ç­¾" || _t(c.title) === "Uncategorized"); if(!uncatCard) { uncatCard = { id: `card_uncat_${Date.now()}`, title: {zh:"æœªåˆ†ç±»ä¹¦ç­¾", en:"Uncategorized"}, links: [] }; targetCategory.cards.push(uncatCard); } uncatCard.links.push(...looseLinks); } if (importedCount > 0) { reRender(); alert(`${_t({zh:"æˆåŠŸå¯¼å…¥",en:"Imported"})} ${importedCount} ${_t({zh:"ä¸ªæ–°ä¹¦ç­¾åˆ°",en:"new bookmarks to"})} "${_t(targetCategory.title)}"!`); } else { alert(_t({zh:'æ²¡æœ‰æ‰¾åˆ°æ–°ä¹¦ç­¾æˆ–æ‰€æœ‰ä¹¦ç­¾å·²å­˜åœ¨ã€‚', en:'No new bookmarks found or they already exist.'})); } modal.style.display = 'none'; e.target.value = ''; }; reader.readAsText(file); });
    
    const editModeBtn = document.getElementById('edit-mode-btn');
    let sortableInstances = []; let isEditMode = false;
    editModeBtn.addEventListener('click', () => { isEditMode = !isEditMode; document.body.classList.toggle('edit-mode', isEditMode); editModeBtn.classList.toggle('active', isEditMode); if (isEditMode) initDragAndDrop(); else destroyDragAndDrop(); });
    function initDragAndDrop() { destroyDragAndDrop(); sortableInstances.push(new Sortable(mainContent.querySelector('.top-right-controls').nextElementSibling, { animation: 150, handle: '.drag-handle', onEnd: (evt) => { moveItem(appData.categories, evt.oldIndex, evt.newIndex); reRender(); if(isEditMode) initDragAndDrop(); }})); document.querySelectorAll('.card-grid').forEach(grid => { const catIndex = grid.closest('.content-section').dataset.catIndex; sortableInstances.push(new Sortable(grid, { group: 'cards', animation: 150, handle: '.drag-handle', onEnd: (evt) => { moveItem(appData.categories[catIndex].cards, evt.oldIndex, evt.newIndex); reRender(); if(isEditMode) initDragAndDrop(); }})); }); }
    function destroyDragAndDrop() { sortableInstances.forEach(s => s.destroy()); sortableInstances = []; }
    
    function updateTopControls() { document.getElementById('lang-switch-btn').textContent = appData.settings.lang === 'zh' ? 'EN' : 'ä¸­'; document.getElementById('theme-switch-btn').textContent = appData.settings.isDark ? 'â˜€ï¸' : 'ğŸŒ™'; }
    document.addEventListener('click', e => { if(e.target.id === 'lang-switch-btn') { appData.settings.lang = appData.settings.lang === 'zh' ? 'en' : 'zh'; reRender(); } if(e.target.id === 'theme-switch-btn') { appData.settings.isDark = !appData.settings.isDark; appData.settings.theme = appData.settings.isDark ? (appData.settings.theme === 'retro' ? 'dark' : appData.settings.theme) : (appData.settings.theme === 'hacker' ? 'default' : appData.settings.theme); saveData(); applyTheme(); updateTopControls(); } });
    
    loadData(); renderAll();
});
</script>

</body>
</html>
