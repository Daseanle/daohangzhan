<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„å®Œå…¨ä¸ªæ€§åŒ–å¯¼èˆªç«™</title>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <style>
        /* --- å…¨å±€ä¸é‡ç½® --- */
        :root {
            --primary-color: #007bff; --bg-color: #f4f6f9; --card-bg-color: #ffffff;
            --text-color: #333; --text-secondary-color: #6c757d; --border-color: #e9ecef;
            --shadow-color: rgba(0, 0, 0, 0.05); --danger-color: #dc3545; --success-color: #28a745;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background-color: var(--bg-color); color: var(--text-color); line-height: 1.6; }
        a { text-decoration: none; color: var(--primary-color); transition: color 0.2s ease; }
        a:hover { color: #0056b3; }
        button { cursor: pointer; border: none; background: none; font-family: inherit; }
        
        /* --- å¸ƒå±€ --- */
        .container { display: flex; max-width: 1600px; margin: 0 auto; }
        .sidebar { width: 220px; height: 100vh; position: sticky; top: 0; background-color: var(--card-bg-color); border-right: 1px solid var(--border-color); padding: 20px 0; overflow-y: auto; flex-shrink: 0; display: flex; flex-direction: column; }
        .sidebar-title { font-size: 1.5em; font-weight: 600; padding: 0 20px 10px; border-bottom: 1px solid var(--border-color); margin-bottom: 10px; }
        .sidebar nav { flex-grow: 1; }
        .sidebar nav ul { list-style: none; }
        .sidebar nav a { display: block; padding: 10px 20px; color: var(--text-secondary-color); font-weight: 500; border-left: 3px solid transparent; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .sidebar nav a:hover { color: var(--primary-color); background-color: var(--bg-color); }
        .sidebar-actions { padding: 10px 20px; border-top: 1px solid var(--border-color); }
        .sidebar-btn { display: flex; align-items: center; gap: 8px; width: 100%; padding: 10px; font-size: 1em; color: var(--text-secondary-color); border-radius: 6px; transition: all 0.2s; margin-top: 5px; }
        .sidebar-btn:hover { background-color: var(--bg-color); color: var(--primary-color); }
        .sidebar-btn svg { width: 18px; height: 18px; flex-shrink: 0; }
        
        /* --- ä¸»å†…å®¹åŒº --- */
        .main-content { flex-grow: 1; padding: 30px; }
        .content-section { margin-bottom: 50px; background: #fff; padding: 20px; border-radius: 8px; border: 1px solid transparent; }
        .section-header { display: flex; align-items: center; gap: 10px; margin-bottom: 25px; padding-bottom: 10px; border-bottom: 2px solid var(--border-color); }
        .section-header h2 { font-size: 2em; color: var(--text-color); flex-grow: 1; }
        .card-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 25px; }
        
        /* --- å¡ç‰‡æ ·å¼ --- */
        .card { background-color: var(--card-bg-color); border-radius: 8px; border: 1px solid var(--border-color); padding: 20px; box-shadow: 0 2px 8px var(--shadow-color); display: flex; flex-direction: column; }
        .card-header { display: flex; align-items: center; gap: 10px; margin-bottom: 15px; }
        .card-header h3 { font-size: 1.25em; color: var(--text-color); flex-grow: 1; }
        .card ul { list-style: none; }
        .link-list-default { display: flex; flex-wrap: wrap; gap: 10px; }
        .link-list-columns { column-count: 2; column-gap: 20px; }
        .card li { break-inside: avoid-column; page-break-inside: avoid; position: relative; margin-bottom: 10px; }
        .card li a { display: block; background-color: var(--bg-color); padding: 6px 12px; border-radius: 15px; font-size: 0.9em; color: var(--text-secondary-color); transition: background-color 0.2s ease, color 0.2s ease; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .card li a:hover { background-color: var(--primary-color); color: #fff; }

        /* --- ç¼–è¾‘æ§ä»¶ --- */
        .controls { display: flex; align-items: center; gap: 8px; flex-shrink: 0;}
        .control-btn { font-size: 16px; color: var(--text-secondary-color); transition: color 0.2s; line-height: 1; padding: 4px; border-radius: 4px; }
        .control-btn:hover { background-color: var(--bg-color); }
        .custom-link-actions { display: none; position: absolute; top: 50%; right: 5px; transform: translateY(-50%); gap: 4px; background: rgba(255,255,255,0.8); padding: 2px 5px; border-radius: 10px;}
        .card li:hover .custom-link-actions { display: flex; }
        .link-action-btn { width: 20px; height: 20px; border-radius: 50%; background-color: rgba(0,0,0,0.6); color: white; font-size: 12px; display: flex; align-items: center; justify-content: center; line-height: 1; border: 1px solid white; }
        .add-item-btn { margin-top: auto; padding-top: 15px; }
        .add-item-btn button { width: 100%; padding: 8px; border: 1px dashed var(--border-color); border-radius: 6px; color: var(--text-secondary-color); transition: all 0.2s; }
        .add-item-btn button:hover { border-color: var(--primary-color); background-color: var(--bg-color); color: var(--primary-color); }
        #add-category-btn-container { text-align: center; margin-top: 40px; }
        #add-category-btn { background-color: var(--success-color); color: white; padding: 10px 20px; border-radius: 5px; font-size: 1em; }
        
        /* --- æ‹–æ‹½æ¨¡å¼ --- */
        .drag-handle { display: none; cursor: move; color: var(--text-secondary-color); font-size: 20px; }
        body.drag-mode .drag-handle { display: block; }
        body.drag-mode .content-section { border: 2px dashed var(--primary-color); }
        body.drag-mode .controls { display: none; }
        .sortable-ghost { opacity: 0.4; background: #c8ebfb; }
        .sortable-chosen { box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        #drag-mode-btn.active { background-color: var(--primary-color); color: white; }
        
        /* --- è®¾ç½®å¼¹çª— --- */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); z-index: 1000; display: none; align-items: center; justify-content: center; }
        .modal-content { background: var(--card-bg-color); padding: 25px; border-radius: 8px; width: 90%; max-width: 500px; max-height: 80vh; overflow-y: auto; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid var(--border-color); }
        .modal-header h3 { font-size: 1.5em; }
        .close-btn { font-size: 1.8em; line-height: 1; color: var(--text-secondary-color); }
        .setting-section { margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px solid var(--border-color);}
        .setting-section:last-child { border-bottom: none; margin-bottom: 0; }
        .setting-section h4 { margin-bottom: 10px; font-size: 1.1em; }
        .modal-btn { display: inline-block; padding: 8px 15px; border-radius: 5px; cursor: pointer; transition: background-color 0.2s; color: white; margin-right: 10px; }
        #export-btn { background-color: var(--success-color); }
        #import-config-label { background-color: var(--primary-color); }
        #reset-btn { background-color: var(--danger-color); }
        #import-bookmarks-label { background-color: var(--primary-color); }
        #import-config-input, #import-bookmarks-input { display: none; }
        .setting-note { font-size: 0.85em; color: var(--text-secondary-color); margin-top: 8px; }
        
        /* --- å“åº”å¼ --- */
        @media (max-width: 992px) {
            .container { flex-direction: column; }
            .sidebar { width: 100%; height: auto; position: sticky; top: 0; z-index: 100; flex-direction: row; align-items: center; border-right: none; border-bottom: 1px solid var(--border-color); padding: 0; }
            .sidebar-title { display: none; }
            .sidebar nav { flex-grow: 1; display: flex; overflow-x: auto; }
            .sidebar nav ul { display: flex; }
            .sidebar nav a { padding: 15px; border-left: none; border-bottom: 3px solid transparent; }
            .sidebar-actions { padding: 0 5px; border-top: none; border-left: 1px solid var(--border-color); display:flex; }
            .sidebar-btn { padding: 15px 10px; margin-top: 0; }
            .main-content { padding: 20px; }
            .card-grid { grid-template-columns: 1fr; }
            .link-list-columns { column-count: 1; }
        }
    </style>
</head>
<body>

    <div class="container">
        <aside class="sidebar">
            <div class="sidebar-title">å¯¼èˆªç«™</div>
            <nav id="sidebar-nav"></nav>
            <div class="sidebar-actions">
                <button id="drag-mode-btn" class="sidebar-btn" title="æ‹–æ‹½æ’åº">
                    <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 320 512" fill="currentColor"><path d="M40 352l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40zm192 0l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40zM40 192l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40zM232 192l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40zM40 32l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0C17.9 160 0 142.1 0 120L0 72C0 49.9 17.9 32 40 32zM232 32l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40z"/></svg>
                </button>
                <button id="settings-btn" class="sidebar-btn" title="è®¾ç½®">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="currentColor"><path d="M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9.9 15.9-19.4 15.9H181.8c-9.5 0-17.4-6.8-19.4-15.9l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L49.8 409.4c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C50.6 273.1 50 264.6 50 256s.6-17.1 1.7-25.4L7.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9.9-15.9 19.4-15.9h148.4c9.5 0 17.4 6.8 19.4 15.9l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"/></svg>
                </button>
            </div>
        </aside>

        <main class="main-content" id="main-content"></main>
    </div>

    <div id="settings-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header"><h3>å¯¼èˆªè®¾ç½®</h3><button class="close-btn" id="close-modal-btn">&times;</button></div>
            <div id="modal-body">
                <div class="setting-section">
                    <h4>æ•°æ®ç®¡ç†</h4>
                    <p class="setting-note">å¯¼å‡ºé…ç½®å¯å¤‡ä»½æ‚¨çš„æ‰€æœ‰å¸ƒå±€å’Œé“¾æ¥ã€‚å¯¼å…¥é…ç½®ä¼šè¦†ç›–å½“å‰æ‰€æœ‰å†…å®¹ã€‚</p>
                    <button id="export-btn" class="modal-btn">å¯¼å‡ºé…ç½®</button>
                    <label for="import-config-input" id="import-config-label" class="modal-btn">å¯¼å…¥é…ç½®...</label>
                    <input type="file" id="import-config-input" accept=".json">
                    <button id="reset-btn" class="modal-btn">æ¢å¤é»˜è®¤</button>
                </div>
                <div class="setting-section">
                    <h4>ä¹¦ç­¾å·¥å…·</h4>
                    <p class="setting-note">ä»æµè§ˆå™¨å¯¼å‡ºçš„HTMLä¹¦ç­¾ï¼Œå°†æ™ºèƒ½è§£ææ–‡ä»¶å¤¹ä¸ºå¡ç‰‡ï¼Œå¹¶è‡ªåŠ¨å»é‡åæ·»åŠ åˆ°ç¬¬ä¸€ä¸ªåˆ†ç±»ä¸­ã€‚</p>
                    <label for="import-bookmarks-input" id="import-bookmarks-label" class="modal-btn">å¯¼å…¥HTMLä¹¦ç­¾...</label>
                    <input type="file" id="import-bookmarks-input" accept=".html,.htm">
                </div>
            </div>
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // --- 1. æ•°æ®ä¸è®¾ç½®ç®¡ç† ---
    const defaultCategories = [
        { id: 'general-news', title: 'ç»¼åˆèµ„è®¯', cards: [ { id: 'gn-1', title: 'ä¸»æµçƒ­ç‚¹', links: [ { name: 'å¾®åš-çƒ­æœ', url: 'https://s.weibo.com/top/summary' }, { name: 'ç™¾åº¦-çƒ­æœ', url: 'https://top.baidu.com/board?tab=realtime' }, { name: 'ä»Šæ—¥å¤´æ¡-çƒ­æ¦œ', url: 'https://www.toutiao.com/trending/' }, { name: 'æŠ–éŸ³-çƒ­ç‚¹æ¦œ', url: 'https://www.douyin.com/hot' }, { name: 'å¿«æ‰‹-çƒ­æ¦œ', url: 'https://www.kuaishou.com/brilliant' }, ]}, { id: 'gn-2', title: 'æ·±åº¦é˜…è¯»', links: [ { name: 'çŸ¥ä¹-çƒ­æ¦œ', url: 'https://www.zhihu.com/hot' }, { name: 'å¾®ä¿¡-çƒ­é—¨', url: 'https://weixin.sogou.com/' }, { name: 'æ¾æ¹ƒæ–°é—»-çƒ­æ¦œ', url: 'https://www.thepaper.cn/hot-news' }, { name: '36æ°ª-çƒ­æ¦œ', url: 'https://36kr.com/hot-list/zonghe' }, { name: 'å°‘æ•°æ´¾-çƒ­æ¦œ', url: 'https://sspai.com/hot' }, { name: 'Readhub-çƒ­é—¨è¯é¢˜', url: 'https://readhub.cn/' }, ]}, { id: 'gn-3', title: 'ç™¾ç§‘çŸ¥è¯†', links: [ { name: 'å†å²ä¸Šçš„ä»Šå¤©', url: 'https://www.todayonhistory.com/' }, { name: 'ç™¾åº¦-ç™¾ç§‘', url: 'https://baike.baidu.com/' }, { name: 'ç»´åŸºç™¾ç§‘-ä¸­æ–‡', url: 'https://zh.wikipedia.org/' }, { name: 'çŸ¥ä¹æ—¥æŠ¥', url: 'https://daily.zhihu.com/' }, ]} ] },
        { id: 'ai-era', title: 'AI çºªå…ƒ', cards: [ { id: 'ai-1', title: 'AI å¿«è®¯', links: [ { name: 'é‡å­ä½-é¦–é¡µ', url: 'https://www.qbitai.com/' }, { name: 'æœºå™¨ä¹‹å¿ƒ-çƒ­æ¦œ', url: 'https://www.jiqizhixin.com/hot-list' }, { name: 'APlay-AIæ—¥æŠ¥', url: 'https://www.aplay.ai/' }, { name: 'Hugging Face-è¶‹åŠ¿', url: 'https://huggingface.co/trending' }, ]}, { id: 'ai-2', title: 'AI äº§å“ä¸åº”ç”¨', links: [ { name: 'Product Hunt - AI', url: 'https://www.producthunt.com/categories/artificial-intelligence' }, { name: 'There\'s An AI For That', url: 'https://theresanaiforthat.com/' }, { name: 'æœªæ¥ç™¾ç§‘ (Futurepedia)', url: 'https://www.futurepedia.io/' }, { name: 'Replicate - Explore', url: 'https://replicate.com/explore' }, ]}, { id: 'ai-3', title: 'å‰æ²¿è®ºæ–‡', links: [ { name: 'arXiv - äººå·¥æ™ºèƒ½ (CS.AI)', url: 'https://arxiv.org/list/cs.AI/new' }, { name: 'Papers with Code - è¶‹åŠ¿', url: 'https://paperswithcode.com/trending' }, ]} ] },
        { id: 'tech-frontier', title: 'ç§‘æŠ€å‰æ²¿', cards: [ { id: 'tf-1', title: 'ç§‘æŠ€é—¨æˆ·', links: [ { name: 'è™å—…ç½‘-çƒ­æ¦œ', url: 'https://www.huxiu.com/hot.html' }, { name: 'ITä¹‹å®¶-çƒ­æ¦œ', url: 'https://www.ithome.com/rank' }, { name: 'cnBeta-çƒ­é—¨', url: 'https://hot.cnbeta.com/' }, { name: 'InfoQ-çƒ­ç‚¹', url: 'https://www.infoq.cn/hot' }, { name: 'å¼€å‘è€…å¤´æ¡', url: 'https://toutiao.io/' }, ]}, { id: 'tf-2', title: 'å¼€å‘è€…ç¤¾åŒº', links: [ { name: 'GitHub-è¶‹åŠ¿', url: 'https://github.com/trending' }, { name: 'V2EX-æœ€çƒ­', url: 'https://www.v2ex.com/?tab=hot' }, { name: 'ç¨€åœŸæ˜é‡‘-çƒ­æ¦œ', url: 'https://juejin.cn/hot/articles' }, { name: 'CSDN-çƒ­æ¦œ', url: 'https://blog.csdn.net/hot-articles' }, { name: 'StackOverflow-çƒ­é—¨', url: 'https://stackoverflow.com/questions' }, { name: 'HelloGitHub', url: 'https://hellogithub.com/' }, ]}, { id: 'tf-3', title: 'ç¡¬æ ¸æå®¢', links: [ { name: 'å¾çˆ±ç ´è§£-çƒ­å¸–', url: 'https://www.52pojie.cn/forum.php?mod=guide&view=hot' }, { name: 'Chiphell-çƒ­å¸–', url: 'https://www.chiphell.com/forum.php?mod=guide&view=hot' }, { name: 'FreeCodeCamp', url: 'https://www.freecodecamp.org/news/' }, ]} ] },
        { id: 'career-growth', title: 'èŒåœºæˆé•¿', cards: [ { id: 'cg-1', title: 'è¡Œä¸šæ´å¯Ÿ', links: [ { name: 'è„‰è„‰-çƒ­æ¦œ', url: 'https://maimai.cn/web/gossip/' }, { name: 'é¢†è‹± (LinkedIn) - æ¯æ—¥å¿…è¯»', url: 'https://www.linkedin.com/news/' }, { name: 'ç¬¬ä¸€è´¢ç»', url: 'https://www.yicai.com/' }, { name: 'åå°”è¡—è§é—»', url: 'https://wallstreetcn.com/' }, ]}, { id: 'cg-2', title: 'æ±‚èŒæ‹›è˜', links: [ { name: 'ç‰›å®¢ç½‘-è®¨è®ºåŒº', url: 'https://www.nowcoder.com/discuss' }, { name: 'Bossç›´è˜-èµ„è®¯', url: 'https://www.zhipin.com/media/news/' }, { name: 'æ‹‰å‹¾-è¨€èŒ', url: 'https://www.lagou.com/active' }, ]}, { id: 'cg-3', title: 'åˆ›ä¸šä¸å‰¯ä¸š', links: [ { name: 'Indie Hackers', url: 'https://www.indiehackers.com/' }, { name: 'å°æŠ¥ç«¥-çƒ­é—¨è®¢é˜…', url: 'https://xiaobot.net/hot_products' }, { name: 'å³åˆ»-åˆ›ä¸š/å‰¯ä¸šåœˆ', url: 'https://web.okjike.com/discover' }, ]} ] },
        { id: 'community-buzz', title: 'ç¤¾åŒºçƒ­è®®', cards: [ { id: 'cb-1', title: 'ç»¼åˆè®¨è®º', links: [ { name: 'è™æ‰‘-æ­¥è¡Œè¡—', url: 'https://bbs.hupu.com/all-gambia' }, { name: 'è´´å§-çƒ­è®®æ¦œ', url: 'https://tieba.baidu.com/hottopic/browse/topicList' }, { name: 'NGA-çƒ­å¸–', url: 'https://bbs.nga.cn/thread.php?fid=-7' }, { name: 'Reddit-çƒ­é—¨', url: 'https://www.reddit.com/hot/' }, ]}, { id: 'cb-2', title: 'å…´è¶£å°ç»„', links: [ { name: 'è±†ç“£-å°ç»„', url: 'https://www.douban.com/group/explore' }, { name: 'å°çº¢ä¹¦-çƒ­é—¨', url: 'https://www.xiaohongshu.com/explore' }, { name: 'å³åˆ»-åœˆå­', url: 'https://web.okjike.com/discover' }, ]}, { id: 'cb-3', title: 'æ€€æ—§ç¤¾åŒº', links: [ { name: 'æ°´æœ¨ç¤¾åŒº-çƒ­ç‚¹', url: 'https://www.newsmth.net/nForum/#!hot' }, { name: 'æœå£³çƒ­ç‚¹', url: 'https://www.guokr.com/hot/' }, ]} ] },
        { id: 'entertainment-lifestyle', title: 'å¨±ä¹ç”Ÿæ´»', cards: [ { id: 'el-1', title: 'å½±éŸ³çƒ­æ¦œ', links: [ { name: 'å“”å“©å“”å“©-çƒ­é—¨', url: 'https://www.bilibili.com/v/popular/all' }, { name: 'è±†ç“£-æ–°ç‰‡æ¦œ', url: 'https://movie.douban.com/chart' }, { name: 'å¾®åš-è¶…è¯ç¤¾åŒº', url: 'https://weibo.com/p/100808_-_chaohua_-_all' }, { name: 'çŒ«çœ¼-ç”µå½±æ¦œ', url: 'https://www.maoyan.com/board' }, { name: 'è…¾è®¯è§†é¢‘-çƒ­æ¦œ', url: 'https://v.qq.com/biu/ranks/' }, { name: 'çˆ±å¥‡è‰º-é£äº‘æ¦œ', url: 'https://www.iqiyi.com/rank/' }, ]}, { id: 'el-2', title: 'æ¸¸æˆä¸–ç•Œ', links: [ { name: 'Steam-çƒ­é”€æ¦œ', url: 'https://store.steampowered.com/search/?filter=topsellers' }, { name: 'TapTap-çƒ­é—¨æ¦œ', url: 'https://www.taptap.cn/top/played' }, { name: 'æ¸¸æ°‘æ˜Ÿç©º-çƒ­ç‚¹', url: 'https://www.gamersky.com/news/' }, { name: 'æœºæ ¸-èµ„è®¯', url: 'https://www.gcores.com/news' }, { name: 'IGN-çƒ­é—¨', url: 'https://www.ign.com/' }, ]}, { id: 'el-3', title: 'ç”Ÿæ´»è¶£å‘³', links: [ { name: 'ä¸‹å¨æˆ¿-æµè¡Œèœè°±', url: 'https://www.xiachufang.com/explore/' }, { name: 'é©¬èœ‚çª-çƒ­é—¨æ¸¸è®°', url: 'http://www.mafengwo.cn/travel-scenic-spot/mafengwo/10186.html' }, { name: 'ç…è›‹-æ— èŠå›¾', url: 'https://jandan.net/pic' }, { name: 'ç³—äº‹ç™¾ç§‘', url: 'https://www.qiushibaike.com/hot/' }, ]} ] },
        { id: 'design-creativity', title: 'çµæ„Ÿåˆ›æ„', cards: [ { id: 'dc-1', title: 'è®¾è®¡çµæ„Ÿ', links: [ { name: 'ç«™é…· (ZCOOL) - äººæ°”æ¦œ', url: 'https://www.zcool.com.cn/discover/0!0!0!0!0!!!!-1!1' }, { name: 'Behance - ç²¾é€‰', url: 'https://www.behance.net/galleries' }, { name: 'Dribbble - æµè¡Œ', url: 'https://dribbble.com/shots' }, { name: 'UIä¸­å›½-æ¨è', url: 'https://www.ui.cn/' }, ]}, { id: 'dc-2', title: 'åˆ›æ„å‘ç°', links: [ { name: 'èŠ±ç“£-çƒ­é—¨', url: 'https://huaban.com/discovery/' }, { name: 'LOFTER-æ’ç”»æ¦œ', url: 'https://www.lofter.com/tag/æ’ç”»' }, { name: 'Unsplash - çƒ­é—¨', url: 'https://unsplash.com/' }, { name: 'Pixiv - æ—¥æ¦œ', url: 'https://www.pixiv.net/ranking.php' }, { name: '500px - æµè¡Œ', url: 'https://500px.com/popular' }, ]} ] },
        { id: 'shopping-deals', title: 'æ¶ˆè´¹æŒ‡å—', cards: [ { id: 'sd-1', title: 'å¥½ä»·æ¨è', links: [ { name: 'ä»€ä¹ˆå€¼å¾—ä¹°-å¥½ä»·', url: 'https://www.smzdm.com/haojia/' }, { name: 'åŒ—ç¾çœé’±å¿«æŠ¥ (Dealmoon)', url: 'https://www.dealmoon.com/' }, { name: 'é›ªçƒ-çƒ­é—¨', url: 'https://xueqiu.com/' }, ]}, { id: 'sd-2', title: 'ç”µå•†çƒ­å–', links: [ { name: 'æ·˜å®-çƒ­é”€', url: 'https://remai.taobao.com/' }, { name: 'äº¬ä¸œ-çƒ­å–', url: 'https://www.jd.com/phb.html' }, { name: 'æ‹¼å¤šå¤š-çƒ­æ¦œ', url: 'https://mobile.pinduoduo.com/ranking.html' }, { name: 'äºšé©¬é€Š-å›¾ä¹¦ç•…é”€æ¦œ', url: 'https://www.amazon.cn/gp/bestsellers/books' }, ]}, { id: 'sd-3', title: 'å“è´¨ç”Ÿæ´»', links: [ { name: 'å°ç±³æœ‰å“-çƒ­é”€', url: 'https://www.xiaomiyoupin.com/hot' }, { name: 'ç½‘æ˜“ä¸¥é€‰-çƒ­é”€', url: 'https://you.163.com/' }, { name: 'é—²é±¼-çƒ­é—¨', url: 'https://g.alicdn.com/idle-fish-web/homepage/' }, ]} ] },
        { id: 'global-view', title: 'å…¨çƒè§†é‡', cards: [ { id: 'gv-1', title: 'å›½é™…é€šè®¯ç¤¾', links: [ { name: 'è·¯é€ç¤¾ (Reuters)', url: 'https://www.reuters.com/' }, { name: 'ç¾è”ç¤¾ (AP)', url: 'https://apnews.com/' }, { name: 'BBC News', url: 'https://www.bbc.com/news' }, { name: 'çº½çº¦æ—¶æŠ¥ (The New York Times)', url: 'https://www.nytimes.com/' }, ]}, { id: 'gv-2', title: 'ç§‘æŠ€ä¸å•†ä¸š', links: [ { name: 'Hacker News', url: 'https://news.ycombinator.com/' }, { name: 'TechCrunch', url: 'https://techcrunch.com/' }, { name: 'The Verge', url: 'https://www.theverge.com/' }, { name: 'å½­åšç¤¾ (Bloomberg)', url: 'https://www.bloomberg.com/' }, { name: 'ç»æµå­¦äºº (The Economist)', url: 'https://www.economist.com/' }, ]} ] },
        { id: 'academic-research', title: 'å­¦æœ¯æ¢ç´¢', cards: [ { id: 'ar-1', title: 'é«˜æ ¡BBS', links: [ { name: 'åŒ—äº¬å¤§å­¦-æœªåBBS', url: 'https://bbs.pku.edu.cn/v2/home.php' }, { name: 'æ¸…åå¤§å­¦-æ°´æœ¨ç¤¾åŒº', url: 'https://www.newsmth.net/' }, { name: 'å¤æ—¦å¤§å­¦-æ—¥æœˆå…‰å', url: 'https://bbs.fudan.edu.cn/bbs/main' }, { name: 'ä¸Šæµ·äº¤å¤§-é¥®æ°´æ€æº', url: 'https://bbs.sjtu.edu.cn/' }, ]}, { id: 'ar-2', title: 'å­¦æœ¯èµ„æº', links: [ { name: 'è°·æ­Œå­¦æœ¯ (Google Scholar)', url: 'https://scholar.google.com/' }, { name: 'çŸ¥ç½‘-çƒ­ç‚¹æ–‡çŒ®', url: 'https://kns.cnki.net/kns/hotspot?type=0' }, ]} ] }
    ];

    let appData;
    function loadData() {
        let data = localStorage.getItem('navData');
        if (data) { appData = JSON.parse(data); } 
        else { appData = { categories: JSON.parse(JSON.stringify(defaultCategories)) }; }
    }
    function saveData() { localStorage.setItem('navData', JSON.stringify(appData)); }
    
    const mainContent = document.getElementById('main-content');
    const sidebarNav = document.getElementById('sidebar-nav');
    function renderAll() { renderSidebar(); renderMainContent(); }
    function renderSidebar() {
        const ul = document.createElement('ul');
        appData.categories.forEach(category => {
            const a = document.createElement('a');
            a.href = `#${category.id}`; a.textContent = category.title;
            const li = document.createElement('li'); li.appendChild(a);
            ul.appendChild(li);
        });
        sidebarNav.innerHTML = ''; sidebarNav.appendChild(ul);
    }
    function renderMainContent() {
        mainContent.innerHTML = '';
        appData.categories.forEach((category, catIndex) => {
            const section = document.createElement('section');
            section.id = category.id; section.className = 'content-section'; section.dataset.catIndex = catIndex;
            
            const cardsHTML = category.cards.map((card, cardIndex) => {
                const isLongList = card.links.length > 8;
                const listClass = isLongList ? 'link-list-columns' : 'link-list-default';
                return `
                <div class="card" data-card-index="${cardIndex}">
                    <div class="card-header">
                        <div class="drag-handle">â ¿</div>
                        <h3>${card.title}</h3>
                        <div class="controls">
                            <button class="control-btn up" title="ä¸Šç§»" onclick="moveCard(${catIndex}, ${cardIndex}, -1)">ğŸ”¼</button>
                            <button class="control-btn down" title="ä¸‹ç§»" onclick="moveCard(${catIndex}, ${cardIndex}, 1)">ğŸ”½</button>
                            <button class="control-btn edit" title="ç¼–è¾‘æ ‡é¢˜" onclick="editCardTitle(${catIndex}, ${cardIndex})">âœï¸</button>
                            <button class="control-btn delete" title="åˆ é™¤å¡ç‰‡" onclick="deleteCard(${catIndex}, ${cardIndex})">âŒ</button>
                        </div>
                    </div>
                    <ul class="${listClass}">
                        ${card.links.map((link, linkIndex) => `
                            <li>
                                <a href="${link.url}" target="_blank" title="${link.name}">${link.name}</a>
                                <div class="custom-link-actions">
                                    <button class="link-action-btn edit" title="ç¼–è¾‘" onclick="editLink(${catIndex}, ${cardIndex}, ${linkIndex})">âœï¸</button>
                                    <button class="link-action-btn delete" title="åˆ é™¤" onclick="deleteLink(${catIndex}, ${cardIndex}, ${linkIndex})">&times;</button>
                                </div>
                            </li>`).join('')}
                    </ul>
                    <div class="add-item-btn"><button onclick="addLink(${catIndex}, ${cardIndex})">+ æ·»åŠ æ–°é“¾æ¥</button></div>
                </div>`;
            }).join('');

            section.innerHTML = `
                <div class="section-header">
                    <div class="drag-handle">â ¿</div>
                    <h2>${category.title}</h2>
                    <div class="controls">
                        <button class="control-btn up" title="ä¸Šç§»" onclick="moveCategory(${catIndex}, -1)">ğŸ”¼</button>
                        <button class="control-btn down" title="ä¸‹ç§»" onclick="moveCategory(${catIndex}, 1)">ğŸ”½</button>
                        <button class="control-btn edit" title="ç¼–è¾‘æ ‡é¢˜" onclick="editCategoryTitle(${catIndex})">âœï¸</button>
                        <button class="control-btn delete" title="åˆ é™¤åˆ†ç±»" onclick="deleteCategory(${catIndex})">âŒ</button>
                    </div>
                </div>
                <div class="card-grid">${cardsHTML}</div>
                <div class="add-item-btn"><button onclick="addCard(${catIndex})">+ æ·»åŠ æ–°å¡ç‰‡</button></div>`;
            mainContent.appendChild(section);
        });
        mainContent.innerHTML += `<div id="add-category-btn-container"><button id="add-category-btn" onclick="addCategory()">+ æ·»åŠ æ–°åˆ†ç±»</button></div>`;
    }
    
    const reRender = () => { saveData(); renderAll(); };
    const moveItem = (arr, from, to) => { const item = arr.splice(from, 1)[0]; arr.splice(to, 0, item); };
    window.addCategory = () => { const title = prompt("æ–°åˆ†ç±»æ ‡é¢˜:"); if(title) appData.categories.push({ id: `c_${Date.now()}`, title, cards: [] }); reRender(); };
    window.deleteCategory = (i) => { if (confirm(`ç¡®è®¤åˆ é™¤åˆ†ç±» "${appData.categories[i].title}"?`)) appData.categories.splice(i, 1); reRender(); };
    window.editCategoryTitle = (i) => { const newTitle = prompt("æ–°æ ‡é¢˜:", appData.categories[i].title); if(newTitle) appData.categories[i].title = newTitle; reRender(); };
    window.moveCategory = (i, dir) => { const to = i + dir; if (to >= 0 && to < appData.categories.length) { moveItem(appData.categories, i, to); reRender(); } };
    window.addCard = (catIdx) => { const title = prompt("æ–°å¡ç‰‡æ ‡é¢˜:"); if(title) appData.categories[catIdx].cards.push({ id: `card_${Date.now()}`, title, links: [] }); reRender(); };
    window.deleteCard = (catIdx, cardIdx) => { if (confirm(`ç¡®è®¤åˆ é™¤å¡ç‰‡ "${appData.categories[catIdx].cards[cardIdx].title}"?`)) appData.categories[catIdx].cards.splice(cardIdx, 1); reRender(); };
    window.editCardTitle = (catIdx, cardIdx) => { const newTitle = prompt("æ–°æ ‡é¢˜:", appData.categories[catIdx].cards[cardIdx].title); if(newTitle) appData.categories[catIdx].cards[cardIdx].title = newTitle; reRender(); };
    window.moveCard = (catIdx, cardIdx, dir) => { const cards = appData.categories[catIdx].cards; const to = cardIdx + dir; if(to >= 0 && to < cards.length) { moveItem(cards, cardIdx, to); reRender(); } };
    window.addLink = (catIdx, cardIdx) => { const name = prompt("ç½‘ç«™åç§°:"); if(!name) return; const url = prompt("ç½‘ç«™åœ°å€:", "https://"); if(!url) return; appData.categories[catIdx].cards[cardIdx].links.push({ name, url }); reRender(); };
    window.editLink = (catIdx, cardIdx, linkIdx) => { const l = appData.categories[catIdx].cards[cardIdx].links[linkIdx]; const name = prompt("æ–°åç§°:", l.name); if(!name) return; const url = prompt("æ–°åœ°å€:", l.url); if(!url) return; l.name = name; l.url = url; reRender(); };
    window.deleteLink = (catIdx, cardIdx, linkIdx) => { if (confirm(`ç¡®è®¤åˆ é™¤é“¾æ¥ "${appData.categories[catIdx].cards[cardIdx].links[linkIdx].name}"?`)) appData.categories[catIdx].cards[cardIdx].links.splice(linkIdx, 1); reRender(); };

    const modal = document.getElementById('settings-modal');
    document.getElementById('settings-btn').addEventListener('click', () => modal.style.display = 'flex');
    document.getElementById('close-modal-btn').addEventListener('click', () => modal.style.display = 'none');
    modal.addEventListener('click', (e) => { if (e.target === modal) modal.style.display = 'none'; });
    
    document.getElementById('reset-btn').addEventListener('click', () => {
        if(confirm('è­¦å‘Šï¼šæ­¤æ“ä½œå°†åˆ é™¤æ‰€æœ‰è‡ªå®šä¹‰å†…å®¹ï¼Œæ¢å¤åˆ°åˆå§‹å¸ƒå±€ï¼Œç¡®å®šè¦ç»§ç»­å—ï¼Ÿ')) {
            localStorage.removeItem('navData'); loadData(); reRender();
            alert('å·²æ¢å¤ä¸ºé»˜è®¤å¸ƒå±€ã€‚'); modal.style.display = 'none';
        }
    });

    document.getElementById('export-btn').addEventListener('click', () => {
        const dataStr = JSON.stringify(appData, null, 2);
        const blob = new Blob([dataStr], {type: 'application/json'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url; a.download = `nav-config-${Date.now()}.json`;
        document.body.appendChild(a); a.click();
        document.body.removeChild(a); URL.revokeObjectURL(url);
    });
    
    const importConfigInput = document.getElementById('import-config-input');
    importConfigInput.addEventListener('change', (event) => {
        const file = event.target.files[0]; if (!file) return;
        const reader = new FileReader();
        reader.onload = (e) => {
            try {
                const importedData = JSON.parse(e.target.result);
                if (importedData && Array.isArray(importedData.categories)) {
                    if (confirm('è¿™å°†è¦†ç›–æ‚¨å½“å‰çš„å…¨éƒ¨å¸ƒå±€å’Œé“¾æ¥ï¼Œç¡®å®šè¦å¯¼å…¥å—ï¼Ÿ')) {
                        appData = importedData; reRender();
                        alert('é…ç½®å·²æˆåŠŸå¯¼å…¥ï¼'); modal.style.display = 'none';
                    }
                } else { alert('æ–‡ä»¶æ ¼å¼æ— æ•ˆï¼Œè¯·é€‰æ‹©æ­£ç¡®çš„é…ç½®æ–‡ä»¶ã€‚'); }
            } catch (error) { alert('è§£ææ–‡ä»¶å¤±è´¥ï¼Œè¯·ç¡®ä¿æ–‡ä»¶æ˜¯æœ‰æ•ˆçš„JSONæ ¼å¼ã€‚'); }
            finally { importConfigInput.value = ''; }
        };
        reader.readAsText(file);
    });
    
    const importBookmarksInput = document.getElementById('import-bookmarks-input');
    importBookmarksInput.addEventListener('change', (event) => {
        const file = event.target.files[0]; if (!file) return;
        const reader = new FileReader();
        reader.onload = (e) => {
            const parser = new DOMParser(); const doc = parser.parseFromString(e.target.result, "text/html");
            let importedCount = 0;
            if (appData.categories.length === 0) appData.categories.push({ id: `c_${Date.now()}`, title: "å¯¼å…¥çš„ä¹¦ç­¾", cards: [] });
            const targetCategory = appData.categories[0];
            const allUrlsInCategory = new Set(targetCategory.cards.flatMap(c => c.links.map(l => l.url)));
            const dts = doc.body.querySelectorAll('dl > dt'); let looseLinks = [];
            dts.forEach(dt => {
                const h3 = dt.querySelector('h3'); const a = dt.querySelector('a');
                if (h3) {
                    const folderName = h3.textContent.trim(); const newCard = { id: `card_${Date.now()}`, title: folderName, links: [] };
                    const linkDl = dt.nextElementSibling;
                    if(linkDl && linkDl.tagName === 'DL') {
                        linkDl.querySelectorAll('a').forEach(linkNode => {
                            const name = linkNode.textContent.trim(); const url = linkNode.href;
                            if (name && url && !url.startsWith('javascript:') && !allUrlsInCategory.has(url)) {
                                newCard.links.push({ name, url }); allUrlsInCategory.add(url); importedCount++;
                            }
                        });
                    }
                    if(newCard.links.length > 0) targetCategory.cards.push(newCard);
                } else if (a) {
                    const name = a.textContent.trim(); const url = a.href;
                    if (name && url && !url.startsWith('javascript:') && !allUrlsInCategory.has(url)) {
                        looseLinks.push({ name, url }); allUrlsInCategory.add(url); importedCount++;
                    }
                }
            });
            if (looseLinks.length > 0) {
                let uncatCard = targetCategory.cards.find(c => c.title === "æœªåˆ†ç±»ä¹¦ç­¾");
                if(!uncatCard) { uncatCard = { id: `card_uncat_${Date.now()}`, title: "æœªåˆ†ç±»ä¹¦ç­¾", links: [] }; targetCategory.cards.push(uncatCard); }
                uncatCard.links.push(...looseLinks);
            }
            if (importedCount > 0) { reRender(); alert(`æˆåŠŸå¯¼å…¥ ${importedCount} ä¸ªæ–°ä¹¦ç­¾åˆ° "${targetCategory.title}" åˆ†ç±»!`); } 
            else { alert('æ²¡æœ‰æ‰¾åˆ°æ–°ä¹¦ç­¾æˆ–æ‰€æœ‰ä¹¦ç­¾å·²å­˜åœ¨ã€‚'); }
            modal.style.display = 'none'; importBookmarksInput.value = '';
        };
        reader.readAsText(file);
    });

    const dragModeBtn = document.getElementById('drag-mode-btn');
    let sortableInstances = []; let isDragMode = false;
    dragModeBtn.addEventListener('click', () => {
        isDragMode = !isDragMode;
        document.body.classList.toggle('drag-mode', isDragMode);
        dragModeBtn.classList.toggle('active', isDragMode);
        if (isDragMode) { initDragAndDrop(); } else { destroyDragAndDrop(); }
    });

    function initDragAndDrop() {
        destroyDragAndDrop(); // Clear existing instances before creating new ones
        sortableInstances.push(new Sortable(mainContent, {
            animation: 150, handle: '.drag-handle', filter: '#add-category-btn-container',
            onEnd: (evt) => { moveItem(appData.categories, evt.oldIndex, evt.newIndex); reRender(); if(isDragMode) initDragAndDrop(); }
        }));
        document.querySelectorAll('.card-grid').forEach(grid => {
            const catIndex = grid.closest('.content-section').dataset.catIndex;
            sortableInstances.push(new Sortable(grid, {
                group: 'cards', animation: 150, handle: '.drag-handle',
                onEnd: (evt) => { moveItem(appData.categories[catIndex].cards, evt.oldIndex, evt.newIndex); reRender(); if(isDragMode) initDragAndDrop(); }
            }));
        });
    }
    function destroyDragAndDrop() { sortableInstances.forEach(s => s.destroy()); sortableInstances = []; }

    loadData();
    renderAll();
});
</script>

</body>
</html>